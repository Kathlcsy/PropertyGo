{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useEffect, useState } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport { useNavigation } from '@react-navigation/native';\nimport { RFValue } from 'react-native-responsive-fontsize';\nimport * as WebBrowser from 'expo-web-browser';\nimport * as Google from 'expo-auth-session/providers/google';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar LoginSelection = function LoginSelection() {\n  var navigation = useNavigation();\n  var _useState = useState(''),\n    _useState2 = _slicedToArray(_useState, 2),\n    token = _useState2[0],\n    setToken = _useState2[1];\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    userInfo = _useState4[0],\n    setUserInfo = _useState4[1];\n  var _Google$useAuthReques = Google.useAuthRequest({\n      androidClientId: '',\n      iosClientId: '',\n      webClientId: ''\n    }),\n    _Google$useAuthReques2 = _slicedToArray(_Google$useAuthReques, 3),\n    request = _Google$useAuthReques2[0],\n    response = _Google$useAuthReques2[1],\n    promptAsync = _Google$useAuthReques2[2];\n  useEffect(function () {\n    handleEffect();\n  }, [response, token]);\n  function handleEffect() {\n    return _handleEffect.apply(this, arguments);\n  }\n  function _handleEffect() {\n    _handleEffect = _asyncToGenerator(function* () {\n      var user = yield getLocalUser();\n      if (!user) {\n        if ((response == null ? void 0 : response.type) === 'success') {\n          getUserInfo(response.authentication.accessToken);\n        }\n      } else {\n        setUserInfo(user);\n      }\n    });\n    return _handleEffect.apply(this, arguments);\n  }\n  var getLocalUser = function () {\n    var _ref = _asyncToGenerator(function* () {\n      var data = yield AsyncStorage.getItem('@user');\n      if (!data) return null;\n      return JSON.parse(data);\n    });\n    return function getLocalUser() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  var getUserInfo = function () {\n    var _ref2 = _asyncToGenerator(function* (token) {\n      if (!token) return;\n      try {\n        var _response = yield fetch('https://www.googleapis.com/userinfo/v2/me', {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        var user = yield _response.json();\n        yield AsyncStorage.setItem('@user', JSON.stringify(user));\n        setUserInfo(user);\n      } catch (error) {}\n    });\n    return function getUserInfo(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  return _jsxs(View, {\n    style: styles.container,\n    children: [!userInfo ? _jsx(Button, {\n      title: \"Sign In with Google\",\n      disabled: !request,\n      onPress: function onPress() {\n        promptAsync();\n      }\n    }) : _jsxs(View, {\n      style: styles.card,\n      children: [(userInfo == null ? void 0 : userInfo.picture) && _jsx(Image, {\n        source: {\n          uri: userInfo == null ? void 0 : userInfo.picture\n        },\n        style: styles.image\n      }), _jsxs(Text, {\n        style: styles.text,\n        children: [\"Email: \", userInfo.email]\n      }), _jsxs(Text, {\n        style: styles.text,\n        children: [\"Verified: \", userInfo.verified_email ? 'yes' : 'no']\n      }), _jsxs(Text, {\n        style: styles.text,\n        children: [\"Name: \", userInfo.name]\n      })]\n    }), _jsx(Button, {\n      title: \"Sign In with Email\",\n      onPress: function onPress() {\n        return navigation.navigate('Login');\n      }\n    })]\n  });\n};\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n    backgroundColor: '#FFFFFF'\n  },\n  welcomeText: {\n    fontWeight: 'bold',\n    fontSize: RFValue(24, 680),\n    color: 'black',\n    marginBottom: 60\n  },\n  icon: {\n    width: width * 0.5,\n    height: height * 0.2,\n    resizeMode: 'contain',\n    marginBottom: 80\n  },\n  button: {\n    alignItems: 'center',\n    justifyContent: 'center',\n    padding: 15,\n    borderRadius: 25,\n    backgroundColor: '#1E90FF',\n    width: width * 0.8,\n    marginVertical: 10\n  },\n  buttonText: {\n    color: '#fff',\n    fontSize: RFValue(16, 680)\n  },\n  socialButton: {\n    alignItems: 'center',\n    justifyContent: 'center',\n    padding: 15,\n    borderRadius: 25,\n    backgroundColor: '#4267B2',\n    width: width * 0.8,\n    marginVertical: 10\n  },\n  socialButtonText: {\n    color: '#fff',\n    fontSize: RFValue(16, 680)\n  }\n});\nexport default LoginSelection;","map":{"version":3,"names":["React","useEffect","useState","StyleSheet","View","Text","Image","TouchableOpacity","Dimensions","Button","useNavigation","RFValue","WebBrowser","Google","AsyncStorage","jsx","_jsx","jsxs","_jsxs","LoginSelection","navigation","_useState","_useState2","_slicedToArray","token","setToken","_useState3","_useState4","userInfo","setUserInfo","_Google$useAuthReques","useAuthRequest","androidClientId","iosClientId","webClientId","_Google$useAuthReques2","request","response","promptAsync","handleEffect","_handleEffect","apply","arguments","_asyncToGenerator","user","getLocalUser","type","getUserInfo","authentication","accessToken","_ref","data","getItem","JSON","parse","_ref2","fetch","headers","Authorization","json","setItem","stringify","error","_x","style","styles","container","children","title","disabled","onPress","card","picture","source","uri","image","text","email","verified_email","name","navigate","create","flex","alignItems","justifyContent","backgroundColor","welcomeText","fontWeight","fontSize","color","marginBottom","icon","width","height","resizeMode","button","padding","borderRadius","marginVertical","buttonText","socialButton","socialButtonText"],"sources":["/Users/wayneonn/Code/PropertyGo/frontend/mobile/screens/login/LoginSelection.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { StyleSheet, View, Text, Image, TouchableOpacity, Dimensions, Button } from 'react-native';\nimport { useNavigation } from '@react-navigation/native';\nimport { RFValue } from 'react-native-responsive-fontsize';\nimport * as WebBrowser from 'expo-web-browser';\nimport * as Google from 'expo-auth-session/providers/google';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\n\n\nconst LoginSelection = () => {\n    const navigation = useNavigation();\n    const [token, setToken] = useState('');\n    const [userInfo, setUserInfo] = useState(null);\n  \n    const [request, response, promptAsync] = Google.useAuthRequest({\n      androidClientId: '',\n      iosClientId: '',\n      webClientId: '',\n    });\n  \n    useEffect(() => {\n      handleEffect();\n    }, [response, token]);\n  \n    async function handleEffect() {\n      const user = await getLocalUser();\n      if (!user) {\n        if (response?.type === 'success') {\n          getUserInfo(response.authentication.accessToken);\n        }\n      } else {\n        setUserInfo(user);\n      }\n    }\n  \n    const getLocalUser = async () => {\n      const data = await AsyncStorage.getItem('@user');\n      if (!data) return null;\n      return JSON.parse(data);\n    };\n  \n    const getUserInfo = async (token) => {\n      if (!token) return;\n      try {\n        const response = await fetch('https://www.googleapis.com/userinfo/v2/me', {\n          headers: { Authorization: `Bearer ${token}` },\n        });\n  \n        const user = await response.json();\n        await AsyncStorage.setItem('@user', JSON.stringify(user));\n        setUserInfo(user);\n      } catch (error) {\n        // Handle errors here\n      }\n    };\n  \n    return (\n      <View style={styles.container}>\n        {!userInfo ? (\n          <Button\n            title=\"Sign In with Google\"\n            disabled={!request}\n            onPress={() => {\n              promptAsync();\n            }}\n          />\n        ) : (\n          <View style={styles.card}>\n            {userInfo?.picture && (\n              <Image source={{ uri: userInfo?.picture }} style={styles.image} />\n            )}\n            <Text style={styles.text}>Email: {userInfo.email}</Text>\n            <Text style={styles.text}>\n              Verified: {userInfo.verified_email ? 'yes' : 'no'}\n            </Text>\n            <Text style={styles.text}>Name: {userInfo.name}</Text>\n          </View>\n        )}\n        <Button\n          title=\"Sign In with Email\"\n          onPress={() => navigation.navigate('Login')}\n        />\n      </View>\n    );\n  };\n  \n  // Styles remain the same\n  \n\nconst styles = StyleSheet.create({\n    container: {\n        flex: 1,\n        alignItems: 'center',\n        justifyContent: 'center',\n        backgroundColor: '#FFFFFF',\n    },\n    welcomeText: {\n        fontWeight: 'bold',\n        fontSize: RFValue(24, 680),\n        color: 'black',\n        marginBottom: 60,\n    },\n    icon: {\n        width: width * 0.5,\n        height: height * 0.2,\n        resizeMode: 'contain',\n        marginBottom: 80,\n    },\n    button: {\n        alignItems: 'center',\n        justifyContent: 'center',\n        padding: 15,\n        borderRadius: 25,\n        backgroundColor: '#1E90FF',\n        width: width * 0.8,\n        marginVertical: 10,\n    },\n    buttonText: {\n        color: '#fff',\n        fontSize: RFValue(16, 680),\n    },\n    socialButton: {\n        alignItems: 'center',\n        justifyContent: 'center',\n        padding: 15,\n        borderRadius: 25,\n        backgroundColor: '#4267B2',\n        width: width * 0.8,\n        marginVertical: 10,\n    },\n    socialButtonText: {\n        color: '#fff',\n        fontSize: RFValue(16, 680),\n    },\n});\n\n\nexport default LoginSelection;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}