{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, useContext, useCallback, useEffect } from 'react';\nimport { AuthContext } from \"../../AuthContext\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport RefreshControl from \"react-native-web/dist/exports/RefreshControl\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport TouchableHighlight from \"react-native-web/dist/exports/TouchableHighlight\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport { useFocusEffect, useRoute } from '@react-navigation/native';\nimport { updateForumCommentFlaggedStatus, deleteForumComment, getAllForumCommentByUserId } from \"../../utils/forumCommentApi\";\nimport { getAllForumPostById } from \"../../utils/forumPostApi\";\nimport ForumCommentItem from \"../../components/Forum/ForumCommenItem\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar YourContributionComments = function YourContributionComments(_ref) {\n  var navigation = _ref.navigation;\n  var _useContext = useContext(AuthContext),\n    user = _useContext.user;\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    comments = _useState2[0],\n    setComments = _useState2[1];\n  var _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    refreshing = _useState4[0],\n    setRefreshing = _useState4[1];\n  var useParentCallback = useCallback(function () {\n    var fetchData = function () {\n      var _ref2 = _asyncToGenerator(function* () {\n        try {\n          var forumComment = yield getAllForumCommentByUserId(user.user.userId, false);\n          setComments(forumComment);\n        } catch (error) {\n          console.error(error);\n        }\n      });\n      return function fetchData() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    fetchData();\n  }, []);\n  useFocusEffect(useParentCallback);\n  var handleDeleteComment = function () {\n    var _ref3 = _asyncToGenerator(function* (forumCommentId) {\n      try {\n        yield deleteForumComment(user.user.userId, forumCommentId);\n        useParentCallback();\n      } catch (error) {\n        console.error(error);\n      }\n    });\n    return function handleDeleteComment(_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  var handleFlagComment = function () {\n    var _ref4 = _asyncToGenerator(function* (forumCommentId) {\n      try {\n        yield updateForumCommentFlaggedStatus(user.user.userId, forumCommentId);\n        useParentCallback();\n      } catch (error) {\n        console.error(error);\n      }\n    });\n    return function handleFlagComment(_x2) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n  var handlePostPress = function () {\n    var _ref5 = _asyncToGenerator(function* (comment) {\n      var post = yield getAllForumPostById(comment.forumPostId);\n      navigation.navigate(\"Forum Comment\", {\n        post: post\n      });\n    });\n    return function handlePostPress(_x3) {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n  var handleRefresh = function () {\n    var _ref6 = _asyncToGenerator(function* () {\n      setRefreshing(true);\n      useParentCallback();\n      setRefreshing(false);\n    });\n    return function handleRefresh() {\n      return _ref6.apply(this, arguments);\n    };\n  }();\n  return _jsx(SafeAreaView, {\n    style: styles.container,\n    children: _jsx(ScrollView, {\n      refreshControl: _jsx(RefreshControl, {\n        refreshing: refreshing,\n        onRefresh: handleRefresh,\n        tintColor: '#FFD700'\n      }),\n      children: comments.map(function (comment, index) {\n        return _jsx(ForumCommentItem, {\n          userId: user.user.userId,\n          comment: comment,\n          onReport: function onReport() {\n            return handleFlagComment(comment.forumCommentId);\n          },\n          onDelete: function onDelete() {\n            return handleDeleteComment(comment.forumCommentId);\n          },\n          useParentCallback: useParentCallback,\n          onPress: function onPress() {\n            return handlePostPress(comment);\n          }\n        }, comment.forumCommentId);\n      })\n    })\n  });\n};\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    marginVertical: 10\n  },\n  horizontalContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    backgroundColor: 'white',\n    borderRadius: 10,\n    marginHorizontal: 10,\n    borderWidth: 1\n  },\n  textInput: {\n    flex: 1,\n    paddingVertical: 10,\n    marginLeft: 10\n  },\n  iconButton: {\n    padding: 10\n  },\n  selectedImage: {\n    width: 200,\n    height: 200,\n    resizeMode: 'cover',\n    marginBottom: 10\n  },\n  buttonText: {\n    color: 'black',\n    fontWeight: 'bold'\n  },\n  buttonDisabled: {\n    opacity: 0.5,\n    backgroundColor: 'gray'\n  },\n  selectedImage: {\n    width: 150,\n    height: 150\n  },\n  removeImageButton: {\n    backgroundColor: '#ccc',\n    padding: 5,\n    borderRadius: 5,\n    marginTop: 5,\n    alignItems: 'center'\n  }\n});\nexport default YourContributionComments;","map":{"version":3,"names":["React","useState","useContext","useCallback","useEffect","AuthContext","StyleSheet","View","Text","TouchableOpacity","ScrollView","SafeAreaView","TextInput","RefreshControl","Image","TouchableHighlight","Button","useFocusEffect","useRoute","updateForumCommentFlaggedStatus","deleteForumComment","getAllForumCommentByUserId","getAllForumPostById","ForumCommentItem","jsx","_jsx","YourContributionComments","_ref","navigation","_useContext","user","_useState","_useState2","_slicedToArray","comments","setComments","_useState3","_useState4","refreshing","setRefreshing","useParentCallback","fetchData","_ref2","_asyncToGenerator","forumComment","userId","error","console","apply","arguments","handleDeleteComment","_ref3","forumCommentId","_x","handleFlagComment","_ref4","_x2","handlePostPress","_ref5","comment","post","forumPostId","navigate","_x3","handleRefresh","_ref6","style","styles","container","children","refreshControl","onRefresh","tintColor","map","index","onReport","onDelete","onPress","create","flex","marginVertical","horizontalContainer","flexDirection","alignItems","justifyContent","backgroundColor","borderRadius","marginHorizontal","borderWidth","textInput","paddingVertical","marginLeft","iconButton","padding","selectedImage","width","height","resizeMode","marginBottom","buttonText","color","fontWeight","buttonDisabled","opacity","removeImageButton","marginTop"],"sources":["/Users/kathleen/Documents/IS4103Capstone/PropertyGo/frontend/mobile/screens/forum/YourContributionComments.js"],"sourcesContent":["import React, { useState, useContext, useCallback, useEffect } from 'react';\nimport { AuthContext } from '../../AuthContext';\nimport { StyleSheet, View, Text, TouchableOpacity, ScrollView, SafeAreaView, TextInput, RefreshControl, Image, TouchableHighlight, Button } from 'react-native';\nimport { useFocusEffect, useRoute } from '@react-navigation/native';\nimport { updateForumCommentFlaggedStatus, deleteForumComment, getAllForumCommentByUserId} from '../../utils/forumCommentApi';\nimport { getAllForumPostById } from '../../utils/forumPostApi';\nimport ForumCommentItem from '../../components/Forum/ForumCommenItem';\n\n\nconst YourContributionComments = ({ navigation }) => {\n\n    const { user } = useContext(AuthContext);\n    const [comments, setComments] = useState([]);\n    const [refreshing, setRefreshing] = useState(false);\n\n    const useParentCallback = useCallback(() => {\n        const fetchData = async () => {\n            try {\n                const forumComment = await getAllForumCommentByUserId(user.user.userId, false);\n                // console.log(forumComment);\n                setComments(forumComment);\n\n            } catch (error) {\n                console.error(error);\n            }\n        }\n\n        fetchData();\n    }, [])\n\n    useFocusEffect(useParentCallback);\n\n    const handleDeleteComment = async (forumCommentId) => {\n        try {\n            await deleteForumComment(user.user.userId, forumCommentId);\n            useParentCallback();\n        } catch (error) {\n            console.error(error);\n        }\n    };\n\n    const handleFlagComment = async (forumCommentId) => {\n        try {\n            await updateForumCommentFlaggedStatus(user.user.userId, forumCommentId);\n            useParentCallback();\n        } catch (error) {\n            console.error(error);\n        }\n\n    };\n\n    const handlePostPress = async (comment) => {\n        // console.log(comment.forumPostId);\n        const post = await getAllForumPostById(comment.forumPostId);\n        navigation.navigate(\"Forum Comment\", { post });\n    };\n\n\n    const handleRefresh = async () => {\n        setRefreshing(true);\n        useParentCallback();\n        setRefreshing(false);\n    };\n\n\n    return (\n        <SafeAreaView style={styles.container}>\n            <ScrollView\n                refreshControl={\n                    <RefreshControl\n                        refreshing={refreshing}\n                        onRefresh={handleRefresh}\n                        tintColor={'#FFD700'}\n                    />\n                }\n            >\n                {comments.map((comment, index) => (\n                    <ForumCommentItem\n                        key={comment.forumCommentId}\n                        userId={user.user.userId}\n                        comment={comment}\n                        onReport={() => handleFlagComment(comment.forumCommentId)}\n                        onDelete={() => handleDeleteComment(comment.forumCommentId)}\n                        useParentCallback={useParentCallback}\n                        onPress={() => handlePostPress(comment)}\n                    />\n                ))}\n\n            </ScrollView>\n\n        </SafeAreaView >\n\n    );\n};\nconst styles = StyleSheet.create({\n    container: {\n        flex: 1,\n        marginVertical: 10,\n    },\n    horizontalContainer: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'space-between',\n        backgroundColor: 'white', // Set background color\n        // padding: 10, // Add padding to the container\n        borderRadius: 10, // Add border radius for rounded corners\n        marginHorizontal: 10,\n        borderWidth: 1,\n    },\n    textInput: {\n        flex: 1,\n        paddingVertical: 10,\n        marginLeft: 10, // Add margin to separate text input from icons\n    },\n    iconButton: {\n        padding: 10,\n    },\n    selectedImage: {\n        width: 200,\n        height: 200,\n        resizeMode: 'cover',\n        marginBottom: 10,\n    },\n    buttonText: {\n        color: 'black',\n        fontWeight: 'bold',\n    },\n    buttonDisabled: {\n        opacity: 0.5,\n        backgroundColor: 'gray',\n    },\n    selectedImage: {\n        width: 150,\n        height: 150,\n    },\n    removeImageButton: {\n        backgroundColor: '#ccc',\n        padding: 5,\n        borderRadius: 5,\n        marginTop: 5,\n        alignItems: 'center',\n    },\n\n})\n\nexport default YourContributionComments;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}