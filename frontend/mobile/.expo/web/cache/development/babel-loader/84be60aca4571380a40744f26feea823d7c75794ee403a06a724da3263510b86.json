{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport { useFocusEffect } from '@react-navigation/native';\nimport { FontAwesome, AntDesign } from '@expo/vector-icons';\nimport Icon from \"@expo/vector-icons/FontAwesome\";\nimport { getUserById } from \"../../utils/api\";\nimport base64 from 'react-native-base64';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nvar ForumItemHeader = function ForumItemHeader(_ref) {\n  var userId = _ref.userId,\n    onMoreOptionsPress = _ref.onMoreOptionsPress,\n    editable = _ref.editable,\n    onEdit = _ref.onEdit;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    profileImage = _useState2[0],\n    setProfileImage = _useState2[1];\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    user = _useState4[0],\n    setUser = _useState4[1];\n  useFocusEffect(React.useCallback(function () {\n    var fetchData = function () {\n      var _ref2 = _asyncToGenerator(function* () {\n        try {\n          var postUser = yield getUserById(userId);\n          setUser(postUser.data);\n          var profileImageBase64;\n          if (postUser && postUser.data.profileImage && postUser.data.profileImage.data) {\n            profileImageBase64 = base64.encodeFromByteArray(postUser.data.profileImage.data);\n            setProfileImage(`data:image/jpeg;base64,${profileImageBase64}`);\n          }\n        } catch (error) {\n          console.error(error);\n        }\n      });\n      return function fetchData() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    fetchData();\n  }, [userId]));\n  return _jsxs(View, {\n    style: styles.forumItem,\n    children: [_jsxs(View, {\n      style: styles.headerContainer,\n      children: [profileImage ? _jsx(Image, {\n        source: {\n          uri: profileImage\n        },\n        style: styles.profileImage\n      }) : _jsx(View, {\n        style: styles.profileImagePlaceholder,\n        children: _jsx(Icon, {\n          name: \"user\",\n          size: 18,\n          color: \"white\"\n        })\n      }), user ? _jsxs(_Fragment, {\n        children: [_jsx(Text, {\n          style: styles.userName,\n          children: user.userName\n        }), _jsxs(Text, {\n          style: styles.age,\n          children: [new Date().getFullYear() - new Date(user.dateOfBirth).getFullYear(), \" y\"]\n        })]\n      }) : _jsx(Text, {\n        children: \"Loading...\"\n      })]\n    }), _jsxs(View, {\n      style: styles.rightHeaderContainer,\n      children: [editable ? _jsx(TouchableOpacity, {\n        onPress: onEdit,\n        style: {\n          marginRight: 10\n        },\n        children: _jsx(AntDesign, {\n          name: \"edit\",\n          size: 20,\n          color: \"black\"\n        })\n      }) : null, _jsx(TouchableOpacity, {\n        onPress: onMoreOptionsPress,\n        children: _jsx(FontAwesome, {\n          name: \"ellipsis-h\",\n          size: 20,\n          color: \"black\"\n        })\n      })]\n    })]\n  });\n};\nvar styles = StyleSheet.create({\n  forumItem: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingTop: 10,\n    paddingHorizontal: 16,\n    borderBottomColor: '#ccc'\n  },\n  headerContainer: {\n    flexDirection: 'row',\n    alignItems: 'center'\n  },\n  rightHeaderContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'flex-end'\n  },\n  profileImage: {\n    width: 25,\n    height: 25,\n    borderRadius: 20\n  },\n  profileImagePlaceholder: {\n    width: 25,\n    height: 25,\n    borderRadius: 20,\n    backgroundColor: 'gray',\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  userName: {\n    fontSize: 12,\n    fontWeight: 'bold',\n    marginHorizontal: 5\n  },\n  age: {\n    fontSize: 10,\n    color: 'gray'\n  }\n});\nexport default ForumItemHeader;","map":{"version":3,"names":["React","useState","useEffect","View","Text","TouchableOpacity","StyleSheet","Image","useFocusEffect","FontAwesome","AntDesign","Icon","getUserById","base64","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ForumItemHeader","_ref","userId","onMoreOptionsPress","editable","onEdit","_useState","_useState2","_slicedToArray","profileImage","setProfileImage","_useState3","_useState4","user","setUser","useCallback","fetchData","_ref2","_asyncToGenerator","postUser","data","profileImageBase64","encodeFromByteArray","error","console","apply","arguments","style","styles","forumItem","children","headerContainer","source","uri","profileImagePlaceholder","name","size","color","userName","age","Date","getFullYear","dateOfBirth","rightHeaderContainer","onPress","marginRight","create","flexDirection","justifyContent","alignItems","paddingTop","paddingHorizontal","borderBottomColor","width","height","borderRadius","backgroundColor","fontSize","fontWeight","marginHorizontal"],"sources":["/Users/kathleen/Documents/IS4103Capstone/PropertyGo/frontend/mobile/components/Forum/ForumPostItemHeader.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { View, Text, TouchableOpacity, StyleSheet, Image } from 'react-native';\nimport { useFocusEffect } from '@react-navigation/native';\nimport { FontAwesome, AntDesign } from '@expo/vector-icons';\nimport Icon from 'react-native-vector-icons/FontAwesome';\nimport { getUserById } from '../../utils/api';\nimport base64 from 'react-native-base64';\n\nconst ForumItemHeader = ({ userId, onMoreOptionsPress, editable, onEdit }) => {\n\n    const [profileImage, setProfileImage] = useState(null);\n    const [user, setUser] = useState(null); // Initialize user as null\n\n    useFocusEffect(\n        React.useCallback(() => {\n            const fetchData = async () => {\n                try {\n                    const postUser = await getUserById(userId);\n                    setUser(postUser.data);\n                    // console.log(\"userId:\", userId)\n                    // console.log(\"user:\", postUser.data);\n\n                    let profileImageBase64;\n                    if (postUser && postUser.data.profileImage && postUser.data.profileImage.data) {\n                        profileImageBase64 = base64.encodeFromByteArray(postUser.data.profileImage.data);\n                        setProfileImage(`data:image/jpeg;base64,${profileImageBase64}`);\n                        // console.log(profileImageBase64)\n                    }\n\n                } catch (error) {\n                    console.error(error);\n                }\n            };\n            fetchData();\n        }, [userId])\n    );\n\n    return (\n        <View style={styles.forumItem}>\n            <View style={styles.headerContainer}>\n                {profileImage ? (\n                    <Image source={{ uri: profileImage }} style={styles.profileImage} />\n                ) : (\n                    <View style={styles.profileImagePlaceholder}>\n                        <Icon name=\"user\" size={18} color=\"white\" />\n                    </View>\n                )}\n                {user ? ( // Check if user data is available\n                    <>\n                        <Text style={styles.userName}>{user.userName}</Text>\n                        <Text style={styles.age}>\n                            {(new Date()).getFullYear() - new Date(user.dateOfBirth).getFullYear()} y\n                        </Text>\n                    </>\n                ) : (\n                    // Render a loading state or a default value while waiting for user data\n                    <Text>Loading...</Text>\n                )}\n            </View>\n            <View style={styles.rightHeaderContainer}>\n                {editable ?\n                    <TouchableOpacity onPress={onEdit} style={{ marginRight: 10 }}>\n                        <AntDesign name=\"edit\" size={20} color=\"black\" />\n                    </TouchableOpacity>\n                    :\n                    null}\n                <TouchableOpacity onPress={onMoreOptionsPress}>\n                    <FontAwesome name=\"ellipsis-h\" size={20} color=\"black\" />\n                </TouchableOpacity>\n            </View>\n        </View>\n    );\n};\nconst styles = StyleSheet.create({\n\n    forumItem: {\n        flexDirection: 'row',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        paddingTop: 10,\n        // marginBottom:5,\n        paddingHorizontal: 16,\n        borderBottomColor: '#ccc',\n        // borderBottomWidth: 1,\n    },\n    headerContainer: {\n        flexDirection: 'row',\n        alignItems: 'center',\n    },\n    rightHeaderContainer: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        // borderWidth: 1,\n        justifyContent: 'flex-end', // Right-align items\n    },\n    profileImage: {\n        width: 25,\n        height: 25,\n        borderRadius: 20,\n    },\n    profileImagePlaceholder: {\n        width: 25,\n        height: 25,\n        borderRadius: 20,\n        backgroundColor: 'gray',\n        justifyContent: 'center',\n        alignItems: 'center',\n    },\n    userName: {\n        fontSize: 12,\n        fontWeight: 'bold',\n        marginHorizontal: 5,\n    },\n    age: {\n        fontSize: 10,\n        color: 'gray',\n\n    },\n})\n\nexport default ForumItemHeader;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}