{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport React, { useEffect, useState, useContext } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport Swiper from 'react-native-swiper';\nimport { Picker } from '@react-native-picker/picker';\nimport * as ImagePicker from 'expo-image-picker';\nimport MapView, { Marker, Callout } from 'react-native-maps';\nimport { Ionicons } from '@expo/vector-icons';\nimport Icon from \"@expo/vector-icons/FontAwesome\";\nimport { editProperty, getPropertyListing, getImageUriById, removeImageById, updateImageById, createImageWithPropertyId } from \"../../utils/api\";\nimport DefaultImage from \"../../assets/No-Image-Available.webp\";\nimport { useNavigation } from '@react-navigation/native';\nimport { AuthContext } from \"../../AuthContext\";\nimport base64 from 'react-native-base64';\nimport { getAreaAndRegion } from \"../../services/GetAreaAndRegion\";\nimport FullScreenImage from \"./FullScreenImage\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar EditPropertyListing = function EditPropertyListing(_ref) {\n  var route = _ref.route;\n  var propertyListingId = route.params.propertyListingId;\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    images = _useState2[0],\n    setImages = _useState2[1];\n  var _useState3 = useState([]),\n    _useState4 = _slicedToArray(_useState3, 2),\n    imageIdArray = _useState4[0],\n    setImageIdArray = _useState4[1];\n  var navigation = useNavigation();\n  var _useState5 = useState(false),\n    _useState6 = _slicedToArray(_useState5, 2),\n    propertyTypeVisible = _useState6[0],\n    setPropertyTypeVisible = _useState6[1];\n  var _useContext = useContext(AuthContext),\n    user = _useContext.user;\n  var _useState7 = useState(null),\n    _useState8 = _slicedToArray(_useState7, 2),\n    propertyListing = _useState8[0],\n    setPropertyListing = _useState8[1];\n  var _useState9 = useState(true),\n    _useState10 = _slicedToArray(_useState9, 2),\n    isLoading = _useState10[0],\n    setIsLoading = _useState10[1];\n  var _useState11 = useState(null),\n    _useState12 = _slicedToArray(_useState11, 2),\n    fullScreenImage = _useState12[0],\n    setFullScreenImage = _useState12[1];\n  var _useState13 = useState({\n      title: '',\n      description: '',\n      price: '',\n      optionFee: '',\n      optionExerciseFee: '',\n      bed: '',\n      bathroom: '',\n      size: '',\n      tenure: '',\n      postalCode: '',\n      address: '',\n      propertyType: ''\n    }),\n    _useState14 = _slicedToArray(_useState13, 2),\n    propertyData = _useState14[0],\n    setPropertyData = _useState14[1];\n  var formatPrice = function formatPrice(price) {\n    return `$${price.replace(/\\D/g, '').replace(/(\\d)(?=(\\d{3})+(?!\\d))/g, '$1,')}`;\n  };\n  var handleOptionPriceChange = function handleOptionPriceChange(text) {\n    var raw = text.replace(/[^0-9]/g, '');\n    setFormattedOptionPrice(formatPrice(raw));\n    setOptionRawPrice(raw);\n  };\n  var handleOptionExercisePriceChange = function handleOptionExercisePriceChange(text) {\n    var raw = text.replace(/[^0-9]/g, '');\n    setFormattedOptionExercisePrice(formatPrice(raw));\n    setOptionExerciseRawPrice(raw);\n  };\n  var _useState15 = useState(formatPrice(propertyData.price.toString())),\n    _useState16 = _slicedToArray(_useState15, 2),\n    formattedPrice = _useState16[0],\n    setFormattedPrice = _useState16[1];\n  var _useState17 = useState(formatPrice(propertyData.optionFee.toString())),\n    _useState18 = _slicedToArray(_useState17, 2),\n    formattedOptionPrice = _useState18[0],\n    setFormattedOptionPrice = _useState18[1];\n  var _useState19 = useState(formatPrice(propertyData.optionExerciseFee.toString())),\n    _useState20 = _slicedToArray(_useState19, 2),\n    formattedOptionExercisePrice = _useState20[0],\n    setFormattedOptionExercisePrice = _useState20[1];\n  var _useState21 = useState(propertyData.price.toString()),\n    _useState22 = _slicedToArray(_useState21, 2),\n    rawPrice = _useState22[0],\n    setRawPrice = _useState22[1];\n  var _useState23 = useState(propertyData.optionFee.toString()),\n    _useState24 = _slicedToArray(_useState23, 2),\n    rawOptionPrice = _useState24[0],\n    setOptionRawPrice = _useState24[1];\n  var _useState25 = useState(propertyData.optionExerciseFee.toString()),\n    _useState26 = _slicedToArray(_useState25, 2),\n    rawOptionExercisePrice = _useState26[0],\n    setOptionExerciseRawPrice = _useState26[1];\n  var viewImage = function viewImage(index) {\n    console.log(\"View Image: \", images[index].uri);\n    var imageUri = getImageUriById(images[index].uri);\n    setFullScreenImage(`${imageUri}?timestamp=${new Date().getTime()}`);\n  };\n  var _useState27 = useState({}),\n    _useState28 = _slicedToArray(_useState27, 2),\n    property = _useState28[0],\n    setProperty = _useState28[1];\n  var propertyTypes = [{\n    label: 'Select Property Type',\n    value: ''\n  }, {\n    label: 'Resale',\n    value: 'Resale'\n  }, {\n    label: 'New Launch',\n    value: 'New Launch'\n  }];\n  var handlePriceChange = function handlePriceChange(text) {\n    var raw = text.replace(/[^0-9]/g, '');\n    setRawPrice(raw);\n    setFormattedPrice(formatPrice(raw));\n  };\n  var handleSubmit = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      console.log(propertyData);\n      if (images.length === 0) {\n        Alert.alert('No images selected', 'Please select at least one image.');\n        return;\n      }\n      console.log(' price:', propertyData.price);\n      console.log('Raw price:', rawPrice);\n      var price = rawPrice ? parseInt(rawPrice, 10) : 0;\n      var optionPrice = rawOptionPrice ? parseInt(rawOptionPrice, 10) : 0;\n      var optionExercisePrice = rawOptionExercisePrice ? parseInt(rawOptionExercisePrice, 10) : 0;\n      if (!rawPrice) {\n        price = propertyData.price;\n      } else if (!price || price <= 0) {\n        Alert.alert('Invalid Price', 'Price must be a numeric value.');\n        return;\n      }\n      if (!optionPrice) {\n        optionPrice = propertyData.optionFee;\n      } else if (!optionPrice || optionPrice <= 0) {\n        Alert.alert('Invalid Option Price', 'Option Price must be a numeric value.');\n        return;\n      }\n      if (!optionExercisePrice) {\n        optionExercisePrice = propertyData.optionExerciseFee;\n      } else if (!optionExercisePrice || optionExercisePrice <= 0) {\n        Alert.alert('Invalid Option Exercise Price', 'Option Exercise Price must be a numeric value.');\n        return;\n      }\n      if (!/^\\d+$/.test(propertyData.size)) {\n        Alert.alert('Invalid Size', 'Size must be a numeric value.');\n        return;\n      }\n      if (!/^\\d+$/.test(propertyData.bed)) {\n        Alert.alert('Invalid Bed', 'Bed must be a numeric value.');\n        return;\n      }\n      if (!/^\\d+$/.test(propertyData.bathroom)) {\n        Alert.alert('Invalid Bathroom', 'Bathroom must be a numeric value.');\n        return;\n      }\n      if (propertyData.propertyType === '') {\n        Alert.alert('Property Type Not Selected', 'Please select a property type.');\n        return;\n      }\n      if (propertyData.title.trim() === '' || propertyData.description.trim() === '' || propertyData.unitNumber.trim() === '' || propertyData.postalCode.trim() === '' || propertyData.address.trim() === '') {\n        Alert.alert('Missing Information', 'Please fill in all fields.');\n        return;\n      }\n      try {\n        var propertyTypeUpperCase = propertyData.propertyType.toUpperCase();\n        if (propertyTypeUpperCase === 'NEW LAUNCH') {\n          propertyTypeUpperCase = 'NEW_LAUNCH';\n        }\n        var _yield$editProperty = yield editProperty(propertyListingId, _objectSpread(_objectSpread({}, propertyData), {}, {\n            price: price,\n            optionFee: optionPrice,\n            optionExerciseFee: optionExercisePrice,\n            propertyType: propertyTypeUpperCase\n          })),\n          success = _yield$editProperty.success,\n          data = _yield$editProperty.data,\n          message = _yield$editProperty.message;\n        if (success) {\n          console.log('Property updated successfully:');\n          Alert.alert('Property Updated', 'The property listing has been updated successfully.');\n          navigation.navigate('Property Listing', {\n            propertyListingId: propertyListingId\n          });\n        } else {\n          Alert.alert('Error', `Failed to update property: ${message}`);\n        }\n      } catch (error) {\n        console.log('Error updating property:', error);\n        Alert.alert('Error', 'An error occurred while updating the property listing.');\n      }\n    });\n    return function handleSubmit() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var fetchAddressByPostalCode = function () {\n    var _ref3 = _asyncToGenerator(function* (postalCode) {\n      if (postalCode.length === 6) {\n        try {\n          var response = yield fetch(`https://developers.onemap.sg/commonapi/search?searchVal=${postalCode}&returnGeom=Y&getAddrDetails=Y`);\n          if (response.ok) {\n            var data = yield response.json();\n            if (data.found === 1) {\n              var address = data.results[0].ADDRESS;\n              var _yield$getAreaAndRegi = yield getAreaAndRegion(postalCode),\n                area = _yield$getAreaAndRegi.area,\n                region = _yield$getAreaAndRegi.region;\n              setPropertyData(_objectSpread(_objectSpread({}, propertyData), {}, {\n                postalCode: postalCode,\n                address: address,\n                area: area,\n                region: region\n              }));\n            } else {\n              Alert.alert('Invalid Postal Code', 'No address found for the postal code.');\n              setPropertyData(_objectSpread(_objectSpread({}, propertyData), {}, {\n                postalCode: '',\n                address: ''\n              }));\n            }\n          } else {\n            console.error('API request failed.');\n          }\n        } catch (error) {\n          console.error('Error fetching address:', error);\n        }\n      }\n    });\n    return function fetchAddressByPostalCode(_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  var handlePostalCodeChange = function handlePostalCodeChange(text) {\n    if (/^\\d{0,6}$/.test(text)) {\n      setPropertyData(_objectSpread(_objectSpread({}, propertyData), {}, {\n        postalCode: text\n      }));\n      if (text.length === 6) {\n        fetchAddressByPostalCode(text);\n      }\n    }\n  };\n  useEffect(function () {\n    fetchPropertyListing(propertyListingId);\n  }, [propertyListingId]);\n  useEffect(function () {\n    fetchImages(propertyListingId);\n  }, [propertyListingId, images]);\n  var fetchImages = function () {\n    var _ref4 = _asyncToGenerator(function* (propertyListingId) {\n      try {\n        var imageArray = yield fetchImageArray(propertyListingId);\n        setImageIdArray(imageArray);\n      } catch (error) {\n        console.error('Error fetching images:', error);\n      }\n    });\n    return function fetchImages(_x2) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n  var fetchPropertyListing = function () {\n    var _ref5 = _asyncToGenerator(function* (id) {\n      try {\n        var response = yield fetch(getPropertyListing(id));\n        var data = yield response.json();\n        setPropertyListing(data);\n        setPropertyData({\n          title: data.title,\n          description: data.description,\n          price: data.price.toString(),\n          optionFee: data.optionFee.toString(),\n          optionExerciseFee: data.optionExerciseFee.toString(),\n          tenure: data.tenure.toString(),\n          bed: data.bed.toString(),\n          bathroom: data.bathroom.toString(),\n          size: data.size.toString(),\n          postalCode: data.postalCode.toString() || '',\n          address: data.address,\n          unitNumber: data.unitNumber || '',\n          propertyType: transformPropertyType(data.propertyType)\n        });\n        setFormattedPrice(formatPrice(data.price.toString()));\n        setFormattedOptionPrice(formatPrice(data.optionFee.toString()));\n        setFormattedOptionExercisePrice(formatPrice(data.optionExerciseFee.toString()));\n        setImages(data.images.map(function (imageUri) {\n          return {\n            uri: imageUri\n          };\n        }));\n        var imageArray = data.images.map(function (imageId) {\n          return {\n            imageId: imageId,\n            uri: getImageUriById(imageId)\n          };\n        });\n        setImageIdArray(imageArray);\n        setIsLoading(false);\n      } catch (error) {\n        console.error('Error fetching property listing:', error);\n        setIsLoading(false);\n      }\n    });\n    return function fetchPropertyListing(_x3) {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n  var transformPropertyType = function transformPropertyType(type) {\n    if (type === 'NEW_LAUNCH') {\n      return 'New Launch';\n    } else {\n      return 'Resale';\n    }\n    return type;\n  };\n  var handleSaveChanges = function () {\n    var _ref6 = _asyncToGenerator(function* () {\n      try {\n        var response = yield editProperty(propertyListingId, propertyData, []);\n        if (response.success) {\n          navigation.navigate('Property Listing', {\n            propertyListingId: propertyListingId\n          });\n        } else {\n          console.error('Error updating property:', response.message);\n        }\n      } catch (error) {\n        console.error('Error updating property:', error);\n      }\n    });\n    return function handleSaveChanges() {\n      return _ref6.apply(this, arguments);\n    };\n  }();\n  var handleChoosePhoto = function () {\n    var _ref7 = _asyncToGenerator(function* () {\n      var permissionResult = yield ImagePicker.requestMediaLibraryPermissionsAsync();\n      if (permissionResult.granted === false) {\n        console.warn('Permission to access photos was denied');\n        return;\n      }\n      var options = {\n        mediaTypes: ImagePicker.MediaTypeOptions.Images,\n        allowsEditing: true,\n        quality: 1\n      };\n      var response = yield ImagePicker.launchImageLibraryAsync(options);\n      if (!response.cancelled) {\n        try {\n          var _yield$createImageWit = yield createImageWithPropertyId(propertyListingId, response),\n            success = _yield$createImageWit.success,\n            data = _yield$createImageWit.data,\n            message = _yield$createImageWit.message;\n          if (success) {\n            var updatedImages = [].concat(_toConsumableArray(images), [{\n              uri: data.imageId\n            }]);\n            setImages(updatedImages);\n            Alert.alert('Image Uploaded', 'The image has been successfully uploaded.');\n          } else {\n            console.error('Error uploading image:', message);\n          }\n        } catch (error) {\n          console.error('Error uploading image:', error);\n        }\n      }\n    });\n    return function handleChoosePhoto() {\n      return _ref7.apply(this, arguments);\n    };\n  }();\n  var handleUpdateImage = function () {\n    var _ref8 = _asyncToGenerator(function* (index, imageId) {\n      var permissionResult = yield ImagePicker.requestMediaLibraryPermissionsAsync();\n      if (permissionResult.granted === false) {\n        console.warn('Permission to access photos was denied');\n        return;\n      }\n      var options = {\n        mediaTypes: ImagePicker.MediaTypeOptions.Images,\n        allowsEditing: true,\n        quality: 1\n      };\n      var response = yield ImagePicker.launchImageLibraryAsync(options);\n      if (!response.cancelled) {\n        var updatedImage = {\n          uri: response.uri,\n          type: 'image/jpeg',\n          name: 'propertyImage.jpg'\n        };\n        try {\n          var _yield$updateImageByI = yield updateImageById(imageId, updatedImage),\n            success = _yield$updateImageByI.success,\n            data = _yield$updateImageByI.data,\n            message = _yield$updateImageByI.message;\n          if (success) {\n            Alert.alert('Image Updated', 'The image has been successfully updated.');\n            var updatedImages = yield fetchLatestImages(propertyListingId);\n            setImages(updatedImages);\n          } else {\n            console.error('Error updating image:', message);\n          }\n        } catch (error) {\n          console.error('Error updating image:', error);\n        }\n      }\n    });\n    return function handleUpdateImage(_x4, _x5) {\n      return _ref8.apply(this, arguments);\n    };\n  }();\n  var fetchLatestImages = function () {\n    var _ref9 = _asyncToGenerator(function* (propertyListingId) {\n      try {\n        var response = yield fetch(getPropertyListing(propertyListingId));\n        var data = yield response.json();\n        return data.images.map(function (imageUri) {\n          return {\n            uri: imageUri\n          };\n        });\n      } catch (error) {\n        console.error('Error fetching latest images:', error);\n        return [];\n      }\n    });\n    return function fetchLatestImages(_x6) {\n      return _ref9.apply(this, arguments);\n    };\n  }();\n  var handleImagePress = function () {\n    var _ref10 = _asyncToGenerator(function* (index) {\n      var imageId = imageIdArray[index].imageId;\n      Alert.alert('Image Options', 'Choose an action for this image:', [{\n        text: 'View Image',\n        onPress: function onPress() {\n          return viewImage(index);\n        }\n      }, {\n        text: 'Update',\n        onPress: function onPress() {\n          return handleUpdateImage(index, imageId);\n        }\n      }, {\n        text: 'Remove',\n        onPress: function onPress() {\n          return handleRemoveImage(index, imageId);\n        },\n        style: 'destructive'\n      }, {\n        text: 'Cancel',\n        style: 'cancel'\n      }], {\n        cancelable: true\n      });\n    });\n    return function handleImagePress(_x7) {\n      return _ref10.apply(this, arguments);\n    };\n  }();\n  var handleRemoveImage = function () {\n    var _ref11 = _asyncToGenerator(function* (index, imageId) {\n      try {\n        var _yield$removeImageByI = yield removeImageById(imageId),\n          success = _yield$removeImageByI.success,\n          message = _yield$removeImageByI.message;\n        if (success) {\n          var updatedImages = _toConsumableArray(images);\n          updatedImages.splice(index, 1);\n          setImages(updatedImages);\n          Alert.alert('Image Removed', 'The image has been successfully removed.');\n        } else {\n          console.error('Error removing image:', message);\n        }\n      } catch (error) {\n        console.error('Error removing image:', error);\n      }\n    });\n    return function handleRemoveImage(_x8, _x9) {\n      return _ref11.apply(this, arguments);\n    };\n  }();\n  if (isLoading) {\n    return _jsx(ActivityIndicator, {\n      style: styles.loadingIndicator\n    });\n  }\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsxs(ScrollView, {\n      style: styles.scrollView,\n      contentContainerStyle: styles.scrollViewContent,\n      keyboardShouldPersistTaps: \"handled\",\n      children: [_jsxs(View, {\n        style: styles.headerContainer,\n        children: [_jsx(TouchableOpacity, {\n          style: styles.backButton,\n          onPress: function onPress() {\n            return navigation.goBack();\n          },\n          children: _jsx(Ionicons, {\n            name: \"arrow-back\",\n            size: 24,\n            color: \"black\"\n          })\n        }), _jsx(Text, {\n          style: styles.header,\n          children: \"Edit Property Listing\"\n        })]\n      }), _jsx(View, {\n        style: styles.imageRow,\n        children: _jsxs(ScrollView, {\n          horizontal: true,\n          children: [_jsx(View, {\n            children: _jsx(TouchableOpacity, {\n              onPress: handleChoosePhoto,\n              style: styles.imagePicker,\n              children: _jsx(Icon, {\n                name: \"camera\",\n                size: 40,\n                color: \"#aaa\"\n              })\n            })\n          }), images.map(function (image, index) {\n            var imageUri = getImageUriById(image.uri);\n            return _jsx(TouchableOpacity, {\n              onPress: function onPress() {\n                return handleImagePress(index);\n              },\n              style: styles.imageContainer,\n              children: imageUri ? _jsx(Image, {\n                source: {\n                  uri: `${imageUri}?timestamp=${new Date().getTime()}`\n                },\n                style: styles.image\n              }) : _jsx(Image, {\n                source: DefaultImage,\n                style: styles.image\n              })\n            }, index);\n          })]\n        })\n      }), _jsxs(View, {\n        style: styles.inputContainer,\n        children: [_jsx(Text, {\n          style: styles.label,\n          children: \"Title\"\n        }), _jsx(TextInput, {\n          placeholder: \"Listing Title\",\n          placeholderTextColor: \"gray\",\n          value: propertyData.title,\n          onChangeText: function onChangeText(text) {\n            return setPropertyData(_objectSpread(_objectSpread({}, propertyData), {}, {\n              title: text\n            }));\n          },\n          style: styles.input\n        })]\n      }), _jsxs(View, {\n        style: styles.inputContainer,\n        children: [_jsx(Text, {\n          style: styles.label,\n          children: \"Price\"\n        }), _jsx(TextInput, {\n          placeholder: \"$ Price\",\n          placeholderTextColor: \"gray\",\n          keyboardType: \"numeric\",\n          value: formattedPrice,\n          onChangeText: handlePriceChange,\n          style: styles.input\n        })]\n      }), _jsxs(View, {\n        style: styles.inputContainer,\n        children: [_jsx(Text, {\n          style: styles.label,\n          children: \"Option Fee\"\n        }), _jsx(TextInput, {\n          placeholder: \"$ Option Fee Price\",\n          placeholderTextColor: \"gray\",\n          value: formattedOptionPrice,\n          keyboardType: \"numeric\",\n          onChangeText: handleOptionPriceChange,\n          style: styles.input\n        })]\n      }), _jsxs(View, {\n        style: styles.inputContainer,\n        children: [_jsx(Text, {\n          style: styles.label,\n          children: \"Option Exercise Fee\"\n        }), _jsx(TextInput, {\n          placeholder: \"$ Option Exercise Fee Price\",\n          placeholderTextColor: \"gray\",\n          value: formattedOptionExercisePrice,\n          keyboardType: \"numeric\",\n          onChangeText: handleOptionExercisePriceChange,\n          style: styles.input\n        })]\n      }), _jsxs(View, {\n        style: styles.inputContainer,\n        children: [_jsx(Text, {\n          style: styles.label,\n          children: \"Size (sqm)\"\n        }), _jsx(TextInput, {\n          placeholder: \"Size (sqm)\",\n          placeholderTextColor: \"gray\",\n          keyboardType: \"numeric\",\n          value: propertyData.size,\n          onChangeText: function onChangeText(text) {\n            return setPropertyData(_objectSpread(_objectSpread({}, propertyData), {}, {\n              size: text\n            }));\n          },\n          style: styles.input\n        })]\n      }), _jsxs(View, {\n        style: styles.inputContainer,\n        children: [_jsx(Text, {\n          style: styles.label,\n          children: \"Bedrooms\"\n        }), _jsx(TextInput, {\n          placeholder: \"Number of Bedrooms\",\n          placeholderTextColor: \"gray\",\n          keyboardType: \"numeric\",\n          value: propertyData.bed,\n          onChangeText: function onChangeText(text) {\n            return setPropertyData(_objectSpread(_objectSpread({}, propertyData), {}, {\n              bed: text\n            }));\n          },\n          style: styles.input\n        })]\n      }), _jsxs(View, {\n        style: styles.inputContainer,\n        children: [_jsx(Text, {\n          style: styles.label,\n          children: \"Bathrooms\"\n        }), _jsx(TextInput, {\n          placeholder: \"Number of Bathrooms\",\n          placeholderTextColor: \"gray\",\n          keyboardType: \"numeric\",\n          value: propertyData.bathroom,\n          onChangeText: function onChangeText(text) {\n            return setPropertyData(_objectSpread(_objectSpread({}, propertyData), {}, {\n              bathroom: text\n            }));\n          },\n          style: styles.input\n        })]\n      }), _jsxs(View, {\n        style: styles.inputContainer,\n        children: [_jsx(Text, {\n          style: styles.label,\n          children: \"Postal Code\"\n        }), _jsx(TextInput, {\n          placeholder: \"Postal Code\",\n          placeholderTextColor: \"gray\",\n          maxLength: 6,\n          keyboardType: \"numeric\",\n          value: propertyData.postalCode,\n          onChangeText: handlePostalCodeChange,\n          style: styles.input\n        })]\n      }), _jsxs(View, {\n        style: styles.inputContainer,\n        children: [_jsx(Text, {\n          style: styles.label,\n          children: \"Address\"\n        }), _jsx(TextInput, {\n          placeholder: \"Address\",\n          placeholderTextColor: \"gray\",\n          value: propertyData.address,\n          onChangeText: function onChangeText(text) {\n            return setPropertyData(_objectSpread(_objectSpread({}, propertyData), {}, {\n              address: text\n            }));\n          },\n          style: [styles.input, styles.mediumTypeInput],\n          multiline: true,\n          numberOfLines: 2\n        })]\n      }), _jsxs(View, {\n        style: styles.inputContainer,\n        children: [_jsx(Text, {\n          style: styles.label,\n          children: \"Tenure\"\n        }), _jsx(TextInput, {\n          placeholder: \"Tenure (e.g. 99 years)\",\n          placeholderTextColor: \"gray\",\n          maxLength: 3,\n          keyboardType: \"numeric\",\n          value: propertyData.tenure,\n          onChangeText: function onChangeText(text) {\n            return setPropertyData(_objectSpread(_objectSpread({}, propertyData), {}, {\n              tenure: text\n            }));\n          },\n          style: styles.input\n        })]\n      }), _jsxs(View, {\n        style: styles.inputContainer,\n        children: [_jsx(Text, {\n          style: styles.label,\n          children: \"Unit Number\"\n        }), _jsx(TextInput, {\n          placeholder: \"Unit Number (e.g. #17-360)\",\n          placeholderTextColor: \"gray\",\n          value: propertyData.unitNumber,\n          onChangeText: function onChangeText(text) {\n            return setPropertyData(_objectSpread(_objectSpread({}, propertyData), {}, {\n              unitNumber: text\n            }));\n          },\n          style: styles.input\n        })]\n      }), _jsxs(View, {\n        style: styles.inputContainer,\n        children: [_jsx(Text, {\n          style: styles.label,\n          children: \"Description\"\n        }), _jsx(TextInput, {\n          placeholder: \"Description of Listing\",\n          placeholderTextColor: \"gray\",\n          value: propertyData.description,\n          onChangeText: function onChangeText(text) {\n            return setPropertyData(_objectSpread(_objectSpread({}, propertyData), {}, {\n              description: text\n            }));\n          },\n          style: [styles.input, styles.largeTextInput],\n          multiline: true,\n          numberOfLines: 4\n        })]\n      }), _jsxs(View, {\n        style: styles.inputContainer,\n        children: [_jsx(Text, {\n          style: styles.label,\n          children: \"Property Type\"\n        }), _jsxs(TouchableOpacity, {\n          style: styles.propertyTypePickerButton,\n          onPress: function onPress() {\n            return setPropertyTypeVisible(true);\n          },\n          children: [_jsx(Text, {\n            style: styles.propertyTypePickerText,\n            children: propertyData.propertyType ? propertyData.propertyType.charAt(0).toUpperCase() + propertyData.propertyType.slice(1) : 'Select Property Type'\n          }), _jsx(Icon, {\n            name: \"caret-down\",\n            size: 20,\n            color: \"black\"\n          })]\n        })]\n      }), _jsx(Modal, {\n        transparent: true,\n        animationType: \"slide\",\n        visible: propertyTypeVisible,\n        onRequestClose: function onRequestClose() {\n          return setPropertyTypeVisible(false);\n        },\n        children: _jsxs(View, {\n          style: styles.modalContainer,\n          children: [_jsx(Picker, {\n            selectedValue: propertyData.propertyType,\n            onValueChange: function onValueChange(value) {\n              return setPropertyData(_objectSpread(_objectSpread({}, propertyData), {}, {\n                propertyType: value\n              }));\n            },\n            style: styles.picker,\n            children: propertyTypes.map(function (type, index) {\n              return _jsx(Picker.Item, {\n                label: type.label,\n                value: type.value\n              }, index);\n            })\n          }), _jsx(View, {\n            style: styles.okButtonContainer,\n            children: _jsx(Button, {\n              title: \"OK\",\n              onPress: function onPress() {\n                return setPropertyTypeVisible(false);\n              }\n            })\n          })]\n        })\n      })]\n    }), _jsxs(TouchableOpacity, {\n      style: styles.saveChangesButton,\n      onPress: handleSubmit,\n      children: [_jsx(Ionicons, {\n        name: \"save-outline\",\n        size: 18,\n        color: \"white\"\n      }), _jsx(Text, {\n        style: styles.saveChangesButtonText,\n        children: \"Update\"\n      })]\n    }), _jsx(FullScreenImage, {\n      imageUrl: fullScreenImage,\n      onClose: function onClose() {\n        return setFullScreenImage(null);\n      }\n    })]\n  });\n};\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    padding: 20\n  },\n  scrollView: {\n    flex: 1,\n    marginBottom: 10\n  },\n  inputContainer: {\n    marginBottom: 10\n  },\n  label: {\n    marginBottom: 5,\n    fontWeight: 'bold'\n  },\n  input: {\n    borderColor: 'gray',\n    borderWidth: 1,\n    marginBottom: 10,\n    padding: 8,\n    height: 40,\n    borderRadius: 5\n  },\n  largeTextInput: {\n    height: 120\n  },\n  mediumTypeInput: {\n    height: 60\n  },\n  imageRow: {\n    flexDirection: 'row',\n    marginBottom: 10,\n    paddingVertical: 10\n  },\n  imagePicker: {\n    alignItems: 'center',\n    justifyContent: 'center',\n    backgroundColor: '#ddd',\n    width: 100,\n    height: 100,\n    marginRight: 10\n  },\n  imageContainer: {\n    position: 'relative',\n    marginRight: 10\n  },\n  image: {\n    width: 100,\n    height: 100\n  },\n  propertyTypePickerButton: {\n    borderWidth: 1,\n    borderRadius: 5,\n    paddingHorizontal: 10,\n    borderColor: 'gray',\n    fontSize: 14,\n    padding: 8,\n    width: '100%',\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center'\n  },\n  propertyTypePickerText: {\n    fontSize: 14\n  },\n  modalContainer: {\n    flex: 1,\n    justifyContent: 'flex-end',\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    paddingBottom: 20\n  },\n  picker: {\n    backgroundColor: 'white'\n  },\n  okButtonContainer: {\n    backgroundColor: 'white'\n  },\n  saveChangesButton: {\n    backgroundColor: 'green',\n    padding: 10,\n    borderRadius: 5,\n    marginTop: 10,\n    alignItems: 'center',\n    flexDirection: 'row',\n    justifyContent: 'center',\n    width: '60%',\n    marginLeft: 70\n  },\n  saveChangesButtonText: {\n    color: 'white',\n    marginLeft: 10\n  },\n  headerContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: 20\n  },\n  header: {\n    fontSize: 24,\n    fontWeight: 'bold',\n    marginLeft: 40\n  },\n  scrollViewContent: {\n    paddingBottom: 100\n  }\n});\nexport default EditPropertyListing;","map":{"version":3,"names":["React","useEffect","useState","useContext","View","Text","TextInput","Button","StyleSheet","ScrollView","Image","TouchableOpacity","Alert","Modal","ActivityIndicator","Swiper","Picker","ImagePicker","MapView","Marker","Callout","Ionicons","Icon","editProperty","getPropertyListing","getImageUriById","removeImageById","updateImageById","createImageWithPropertyId","DefaultImage","useNavigation","AuthContext","base64","getAreaAndRegion","FullScreenImage","jsx","_jsx","jsxs","_jsxs","EditPropertyListing","_ref","route","propertyListingId","params","_useState","_useState2","_slicedToArray","images","setImages","_useState3","_useState4","imageIdArray","setImageIdArray","navigation","_useState5","_useState6","propertyTypeVisible","setPropertyTypeVisible","_useContext","user","_useState7","_useState8","propertyListing","setPropertyListing","_useState9","_useState10","isLoading","setIsLoading","_useState11","_useState12","fullScreenImage","setFullScreenImage","_useState13","title","description","price","optionFee","optionExerciseFee","bed","bathroom","size","tenure","postalCode","address","propertyType","_useState14","propertyData","setPropertyData","formatPrice","replace","handleOptionPriceChange","text","raw","setFormattedOptionPrice","setOptionRawPrice","handleOptionExercisePriceChange","setFormattedOptionExercisePrice","setOptionExerciseRawPrice","_useState15","toString","_useState16","formattedPrice","setFormattedPrice","_useState17","_useState18","formattedOptionPrice","_useState19","_useState20","formattedOptionExercisePrice","_useState21","_useState22","rawPrice","setRawPrice","_useState23","_useState24","rawOptionPrice","_useState25","_useState26","rawOptionExercisePrice","viewImage","index","console","log","uri","imageUri","Date","getTime","_useState27","_useState28","property","setProperty","propertyTypes","label","value","handlePriceChange","handleSubmit","_ref2","_asyncToGenerator","length","alert","parseInt","optionPrice","optionExercisePrice","test","trim","unitNumber","propertyTypeUpperCase","toUpperCase","_yield$editProperty","_objectSpread","success","data","message","navigate","error","apply","arguments","fetchAddressByPostalCode","_ref3","response","fetch","ok","json","found","results","ADDRESS","_yield$getAreaAndRegi","area","region","_x","handlePostalCodeChange","fetchPropertyListing","fetchImages","_ref4","imageArray","fetchImageArray","_x2","_ref5","id","transformPropertyType","map","imageId","_x3","type","handleSaveChanges","_ref6","handleChoosePhoto","_ref7","permissionResult","requestMediaLibraryPermissionsAsync","granted","warn","options","mediaTypes","MediaTypeOptions","Images","allowsEditing","quality","launchImageLibraryAsync","cancelled","_yield$createImageWit","updatedImages","concat","_toConsumableArray","handleUpdateImage","_ref8","updatedImage","name","_yield$updateImageByI","fetchLatestImages","_x4","_x5","_ref9","_x6","handleImagePress","_ref10","onPress","handleRemoveImage","style","cancelable","_x7","_ref11","_yield$removeImageByI","splice","_x8","_x9","styles","loadingIndicator","container","children","scrollView","contentContainerStyle","scrollViewContent","keyboardShouldPersistTaps","headerContainer","backButton","goBack","color","header","imageRow","horizontal","imagePicker","image","imageContainer","source","inputContainer","placeholder","placeholderTextColor","onChangeText","input","keyboardType","maxLength","mediumTypeInput","multiline","numberOfLines","largeTextInput","propertyTypePickerButton","propertyTypePickerText","charAt","slice","transparent","animationType","visible","onRequestClose","modalContainer","selectedValue","onValueChange","picker","Item","okButtonContainer","saveChangesButton","saveChangesButtonText","imageUrl","onClose","create","flex","padding","marginBottom","fontWeight","borderColor","borderWidth","height","borderRadius","flexDirection","paddingVertical","alignItems","justifyContent","backgroundColor","width","marginRight","position","paddingHorizontal","fontSize","paddingBottom","marginTop","marginLeft"],"sources":["/Users/limzhongzhi/WebstormProjects/PropertyGo/frontend/mobile/screens/propertyListings/EditPropertyUserListing.js"],"sourcesContent":["import React, { useEffect, useState, useContext } from 'react';\nimport {\n  View,\n  Text,\n  TextInput,\n  Button,\n  StyleSheet,\n  ScrollView,\n  Image,\n  TouchableOpacity,\n  Alert,\n  Modal,\n  ActivityIndicator,\n} from 'react-native';\nimport Swiper from 'react-native-swiper';\nimport { Picker } from '@react-native-picker/picker';\nimport * as ImagePicker from 'expo-image-picker';\nimport MapView, { Marker, Callout } from 'react-native-maps';\nimport { Ionicons } from '@expo/vector-icons';\nimport Icon from 'react-native-vector-icons/FontAwesome';\nimport {\n  editProperty, getPropertyListing, getImageUriById,\n  removeImageById, updateImageById, createImageWithPropertyId\n} from '../../utils/api';\nimport DefaultImage from '../../assets/No-Image-Available.webp';\nimport { useNavigation } from '@react-navigation/native';\nimport { AuthContext } from '../../AuthContext';\nimport base64 from 'react-native-base64';\nimport { getAreaAndRegion } from '../../services/GetAreaAndRegion';\nimport FullScreenImage from './FullScreenImage';\n\nconst EditPropertyListing = ({ route }) => {\n  const { propertyListingId } = route.params;\n  const [images, setImages] = useState([]);\n  const [imageIdArray, setImageIdArray] = useState([]);\n  const navigation = useNavigation();\n  const [propertyTypeVisible, setPropertyTypeVisible] = useState(false);\n  const { user } = useContext(AuthContext);\n  const [propertyListing, setPropertyListing] = useState(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [fullScreenImage, setFullScreenImage] = useState(null);\n\n  const [propertyData, setPropertyData] = useState({\n    title: '',\n    description: '',\n    price: '',\n    optionFee: '',\n    optionExerciseFee: '',\n    bed: '',\n    bathroom: '',\n    size: '',\n    tenure: '',\n    postalCode: '',\n    address: '',\n    propertyType: '', // You should also initialize propertyType here if it's part of propertyData\n  });\n\n  // Function to format the price with dollar sign and commas\n  const formatPrice = (price) => {\n    return `$${price.replace(/\\D/g, '').replace(/(\\d)(?=(\\d{3})+(?!\\d))/g, '$1,')}`;\n  };\n\n  const handleOptionPriceChange = (text) => {\n    const raw = text.replace(/[^0-9]/g, '');\n    setFormattedOptionPrice(formatPrice(raw));\n    setOptionRawPrice(raw);\n  };\n\n  const handleOptionExercisePriceChange = (text) => {\n    const raw = text.replace(/[^0-9]/g, '');\n    setFormattedOptionExercisePrice(formatPrice(raw));\n    setOptionExerciseRawPrice(raw);\n  };\n\n  // Initialize formattedPrice and rawPrice with the initial price from propertyData\n  const [formattedPrice, setFormattedPrice] = useState(\n    formatPrice(propertyData.price.toString())\n  );\n\n  const [formattedOptionPrice, setFormattedOptionPrice] = useState(formatPrice(propertyData.optionFee.toString()));\n  const [formattedOptionExercisePrice, setFormattedOptionExercisePrice] = useState(formatPrice(propertyData.optionExerciseFee.toString()));\n\n  const [rawPrice, setRawPrice] = useState(propertyData.price.toString());\n  const [rawOptionPrice, setOptionRawPrice] = useState(propertyData.optionFee.toString());\n  const [rawOptionExercisePrice, setOptionExerciseRawPrice] = useState(propertyData.optionExerciseFee.toString());\n\n  const viewImage = (index) => {\n    console.log(\"View Image: \", images[index].uri)\n    const imageUri = getImageUriById(images[index].uri);\n    setFullScreenImage(`${imageUri}?timestamp=${new Date().getTime()}`)\n  }\n\n  const [property, setProperty] = useState({\n  });\n\n  const propertyTypes = [\n    { label: 'Select Property Type', value: '' },\n    { label: 'Resale', value: 'Resale' },\n    { label: 'New Launch', value: 'New Launch' },\n  ]\n\n  // Function to remove dollar sign and commas and save raw price\n  const handlePriceChange = (text) => {\n    // Remove dollar sign and commas\n    const raw = text.replace(/[^0-9]/g, '');\n\n    // Update rawPrice here\n    setRawPrice(raw);\n\n    // Format and update formattedPrice\n    setFormattedPrice(formatPrice(raw));\n  };\n\n\n\n  const handleSubmit = async () => {\n    // Validation checks\n    console.log(propertyData)\n    if (images.length === 0) {\n      Alert.alert('No images selected', 'Please select at least one image.');\n      return;\n    }\n\n    // Parse the formatted price to remove dollar sign and commas\n    console.log(' price:', propertyData.price);\n    console.log('Raw price:', rawPrice);\n    let price = rawPrice ? parseInt(rawPrice, 10) : 0;\n    let optionPrice = rawOptionPrice ? parseInt(rawOptionPrice, 10) : 0;\n    let optionExercisePrice = rawOptionExercisePrice ? parseInt(rawOptionExercisePrice, 10) : 0;\n\n    if (!rawPrice) {\n      price = propertyData.price;\n    } else if (!price|| price <= 0) {\n      Alert.alert('Invalid Price', 'Price must be a numeric value.');\n      return;\n    } \n\n    if (!optionPrice) {\n      optionPrice = propertyData.optionFee;\n    } else if (!optionPrice|| optionPrice <= 0) {\n      Alert.alert('Invalid Option Price', 'Option Price must be a numeric value.');\n      return;\n    } \n\n    if (!optionExercisePrice) {\n      optionExercisePrice = propertyData.optionExerciseFee;\n    } else if (!optionExercisePrice|| optionExercisePrice <= 0) {\n      Alert.alert('Invalid Option Exercise Price', 'Option Exercise Price must be a numeric value.');\n      return;\n    } \n\n    if (!/^\\d+$/.test(propertyData.size)) {\n      Alert.alert('Invalid Size', 'Size must be a numeric value.');\n      return;\n    }\n\n    if (!/^\\d+$/.test(propertyData.bed)) {\n      Alert.alert('Invalid Bed', 'Bed must be a numeric value.');\n      return;\n    }\n\n    if (!/^\\d+$/.test(propertyData.bathroom)) {\n      Alert.alert('Invalid Bathroom', 'Bathroom must be a numeric value.');\n      return;\n    }\n\n    if (propertyData.propertyType === '') {\n      Alert.alert('Property Type Not Selected', 'Please select a property type.');\n      return;\n    }\n\n    if (\n      propertyData.title.trim() === '' ||\n      propertyData.description.trim() === '' ||\n      propertyData.unitNumber.trim() === '' ||\n      propertyData.postalCode.trim() === '' ||\n      propertyData.address.trim() === ''\n    ) {\n      Alert.alert('Missing Information', 'Please fill in all fields.');\n      return;\n    }\n\n    // Check if propertyData.offeredPrice is defined before replacing characters\n    // const offeredPrice = propertyData.offeredPrice ? propertyData.offeredPrice.replace(/\\$/g, '') : '';\n\n    // Other checks and API call\n    try {\n\n      let propertyTypeUpperCase = propertyData.propertyType.toUpperCase();\n      if (propertyTypeUpperCase === 'NEW LAUNCH') {\n        propertyTypeUpperCase = 'NEW_LAUNCH';\n      }\n\n      const { success, data, message } = await editProperty(\n        propertyListingId, // Pass the propertyListingId\n        {\n          ...propertyData,\n          price: price,\n          optionFee: optionPrice,\n          optionExerciseFee: optionExercisePrice,\n          propertyType: propertyTypeUpperCase,\n        }\n      );\n\n      if (success) {\n        console.log('Property updated successfully:');\n        Alert.alert(\n          'Property Updated',\n          'The property listing has been updated successfully.'\n        );\n        navigation.navigate('Property Listing', { propertyListingId });\n      } else {\n        Alert.alert('Error', `Failed to update property: ${message}`);\n      }\n    } catch (error) {\n      console.log('Error updating property:', error);\n      Alert.alert(\n        'Error',\n        'An error occurred while updating the property listing.'\n      );\n    }\n  };\n\n\n\n\n  // Function to fetch address based on postal code\n  const fetchAddressByPostalCode = async (postalCode) => {\n    if (postalCode.length === 6) {\n      try {\n        const response = await fetch(\n          `https://developers.onemap.sg/commonapi/search?searchVal=${postalCode}&returnGeom=Y&getAddrDetails=Y`\n        );\n\n        if (response.ok) {\n          const data = await response.json();\n          if (data.found === 1) {\n            const address = data.results[0].ADDRESS;\n            const { area, region } = await getAreaAndRegion(postalCode);\n\n            // Update the postalCode field in the property state\n            setPropertyData({\n              ...propertyData,\n              postalCode, // Update postalCode with the new value\n              address,\n              area,\n              region,\n            });\n          } else {\n            Alert.alert('Invalid Postal Code', 'No address found for the postal code.');\n            setPropertyData({ ...propertyData, postalCode: '', address: '' }); // Clear postalCode and address\n          }\n        } else {\n          console.error('API request failed.');\n        }\n      } catch (error) {\n        console.error('Error fetching address:', error);\n      }\n    }\n  };\n\n  // Event listener for postal code input\n  const handlePostalCodeChange = (text) => {\n    // Restrict input to a maximum of 6 digits\n    if (/^\\d{0,6}$/.test(text)) {\n      // Update the postalCode field in the property state\n      setPropertyData({\n        ...propertyData,\n        postalCode: text, // Update postalCode with the new value\n      });\n\n      // Call the function to fetch the address\n      if (text.length === 6) {\n        fetchAddressByPostalCode(text);\n      }\n    }\n  };\n\n\n  useEffect(() => {\n    // Fetch property listing details using propertyListingId from your API\n    fetchPropertyListing(propertyListingId);\n  }, [propertyListingId]);\n\n  useEffect(() => {\n    // Fetch images based on propertyListingId\n    fetchImages(propertyListingId);\n  }, [propertyListingId, images]); // You can keep images here if you want to refresh the images when it changes\n\n  const fetchImages = async (propertyListingId) => {\n    try {\n      // Fetch images based on propertyListingId and update the images state\n      const imageArray = await fetchImageArray(propertyListingId);\n      setImageIdArray(imageArray);\n    } catch (error) {\n      console.error('Error fetching images:', error);\n      // Handle the error appropriately, e.g., show an error message to the user\n    }\n  };\n\n  const fetchPropertyListing = async (id) => {\n    try {\n      // Make an API call to fetch property listing details by id\n      const response = await fetch(getPropertyListing(id));\n      const data = await response.json();\n      setPropertyListing(data); // Update state with the fetched data\n\n      // Update the property data fields with fetched data\n      setPropertyData({\n        title: data.title,\n        description: data.description,\n        price: data.price.toString(),\n        optionFee: data.optionFee.toString(),\n        optionExerciseFee: data.optionExerciseFee.toString(),\n        tenure: data.tenure.toString(),\n        bed: data.bed.toString(),\n        bathroom: data.bathroom.toString(),\n        size: data.size.toString(),\n        postalCode: data.postalCode.toString() || '', // Update postalCode (or provide a default value)\n        address: data.address,\n        unitNumber: data.unitNumber || '', // Update unitNumber (or provide a default value)\n        propertyType: transformPropertyType(data.propertyType), // Transform propertyType label\n      });\n\n      // Update formattedPrice with the fetched price\n      setFormattedPrice(formatPrice(data.price.toString()));\n      setFormattedOptionPrice(formatPrice(data.optionFee.toString()));\n      setFormattedOptionExercisePrice(formatPrice(data.optionExerciseFee.toString()));\n\n      // Set the 'images' state with the fetched image URIs\n      setImages(data.images.map((imageUri) => ({ uri: imageUri })));\n      const imageArray = data.images.map((imageId) => ({ imageId, uri: getImageUriById(imageId) }));\n      setImageIdArray(imageArray);\n\n      // Set isLoading to false here\n      setIsLoading(false);\n    } catch (error) {\n      console.error('Error fetching property listing:', error);\n      setIsLoading(false); // Ensure that isLoading is set to false even on error\n    }\n  };\n\n\n  // Function to transform property type label\n  const transformPropertyType = (type) => {\n    if (type === 'NEW_LAUNCH') {\n      return 'New Launch';\n    } else {\n      return 'Resale'\n    }\n    // Handle other property type cases here if needed\n    return type; // Return the type unchanged if not matched\n  };\n\n  const handleSaveChanges = async () => {\n    try {\n      const response = await editProperty(propertyListingId, propertyData, []);\n      if (response.success) {\n        // Property updated successfully, navigate back to the property listing screen\n        navigation.navigate('Property Listing', { propertyListingId });\n      } else {\n        console.error('Error updating property:', response.message);\n        // Handle the error appropriately, e.g., show an error message to the user\n      }\n    } catch (error) {\n      console.error('Error updating property:', error);\n      // Handle the error appropriately, e.g., show an error message to the user\n    }\n  };\n\n  const handleChoosePhoto = async () => {\n    const permissionResult = await ImagePicker.requestMediaLibraryPermissionsAsync();\n\n    if (permissionResult.granted === false) {\n      console.warn('Permission to access photos was denied');\n      return;\n    }\n\n    const options = {\n      mediaTypes: ImagePicker.MediaTypeOptions.Images,\n      allowsEditing: true,\n      quality: 1,\n    };\n\n    let response = await ImagePicker.launchImageLibraryAsync(options);\n\n    if (!response.cancelled) {\n      // Upload the selected image to the backend\n      try {\n        const { success, data, message } = await createImageWithPropertyId(\n          propertyListingId, // Pass the propertyListingId\n          response // Pass the whole response object\n        );\n\n        if (success) {\n          // Add the newly uploaded image to the state\n          const updatedImages = [...images, { uri: data.imageId }];\n          setImages(updatedImages);\n\n          // Show an alert for successful upload\n          Alert.alert('Image Uploaded', 'The image has been successfully uploaded.');\n        } else {\n          console.error('Error uploading image:', message);\n          // Handle the error appropriately, e.g., show an error message to the user\n        }\n      } catch (error) {\n        console.error('Error uploading image:', error);\n        // Handle the error appropriately, e.g., show an error message to the user\n      }\n    }\n  };\n\n\n  const handleUpdateImage = async (index, imageId) => {\n    const permissionResult = await ImagePicker.requestMediaLibraryPermissionsAsync();\n\n    if (permissionResult.granted === false) {\n      console.warn('Permission to access photos was denied');\n      return;\n    }\n\n    const options = {\n      mediaTypes: ImagePicker.MediaTypeOptions.Images,\n      allowsEditing: true,\n      quality: 1,\n    };\n\n    let response = await ImagePicker.launchImageLibraryAsync(options);\n\n    if (!response.cancelled) {\n      // Create the updated image object\n      const updatedImage = {\n        uri: response.uri, // Use the uri field to specify the URI\n        type: 'image/jpeg', // Modify the type according to your needs\n        name: 'propertyImage.jpg',\n      };\n\n      // Call the updateImageById function with the imageId and updatedImage\n      try {\n        const { success, data, message } = await updateImageById(imageId, updatedImage);\n\n        if (success) {\n          // Show an alert for successful upload\n          Alert.alert('Image Updated', 'The image has been successfully updated.');\n\n          // Fetch the latest images from the API\n          const updatedImages = await fetchLatestImages(propertyListingId);\n\n          // Update the images state with the latest images\n          setImages(updatedImages); // This should trigger a re-render\n        } else {\n          console.error('Error updating image:', message);\n          // Handle the error appropriately, e.g., show an error message to the user\n        }\n      } catch (error) {\n        console.error('Error updating image:', error);\n        // Handle the error appropriately, e.g., show an error message to the user\n      }\n    }\n  };\n\n  // Function to fetch the latest images from the API\n  const fetchLatestImages = async (propertyListingId) => {\n    try {\n      // Make an API call to fetch the latest property listing details\n      const response = await fetch(getPropertyListing(propertyListingId));\n      const data = await response.json();\n\n      // Return the latest images from the fetched data\n      return data.images.map((imageUri) => ({ uri: imageUri }));\n    } catch (error) {\n      console.error('Error fetching latest images:', error);\n      return [];\n    }\n  };\n\n\n\n  const handleImagePress = async (index) => {\n    // Display an alert with options to update or remove the image\n    const imageId = imageIdArray[index].imageId;\n    // console.log('imageId here ', imageId)\n    Alert.alert(\n      'Image Options',\n      'Choose an action for this image:',\n      [\n        {\n          text: 'View Image',\n          onPress: () => viewImage(index),\n        },\n        {\n          text: 'Update',\n          onPress: () => handleUpdateImage(index, imageId),\n        },\n        {\n          text: 'Remove',\n          onPress: () => handleRemoveImage(index, imageId),\n          style: 'destructive',\n        },\n        {\n          text: 'Cancel',\n          style: 'cancel',\n        },\n      ],\n      { cancelable: true }\n    );\n  };\n\n  const handleRemoveImage = async (index, imageId) => {\n    try {\n      const { success, message } = await removeImageById(\n        imageId\n      );\n\n      if (success) {\n        // Remove the image at the specified index from the 'images' state\n        const updatedImages = [...images];\n        updatedImages.splice(index, 1);\n        setImages(updatedImages);\n        Alert.alert('Image Removed', 'The image has been successfully removed.');\n      } else {\n        console.error('Error removing image:', message);\n        // Handle the error appropriately, e.g., show an error message to the user\n      }\n    } catch (error) {\n      console.error('Error removing image:', error);\n      // Handle the error appropriately, e.g., show an error message to the user\n    }\n  };\n\n\n  if (isLoading) {\n    return <ActivityIndicator style={styles.loadingIndicator} />;\n  }\n\n  return (\n    <View style={styles.container}>\n      <ScrollView\n        style={styles.scrollView}\n        contentContainerStyle={styles.scrollViewContent}\n        keyboardShouldPersistTaps=\"handled\" // Add this prop\n      >\n        <View style={styles.headerContainer}>\n          {/* Back button */}\n          <TouchableOpacity style={styles.backButton} onPress={() => navigation.goBack()}>\n            <Ionicons name=\"arrow-back\" size={24} color=\"black\" />\n          </TouchableOpacity>\n          <Text style={styles.header}>Edit Property Listing</Text>\n        </View>\n        <View style={styles.imageRow}>\n          <ScrollView horizontal={true}>\n            {/* Add a View to hold the Add Image button */}\n            <View>\n              <TouchableOpacity onPress={handleChoosePhoto} style={styles.imagePicker}>\n                <Icon name=\"camera\" size={40} color=\"#aaa\" />\n              </TouchableOpacity>\n            </View>\n\n            {/* Map over the images */}\n            {images.map((image, index) => {\n              const imageUri = getImageUriById(image.uri);\n              // console.log('imageUri:', imageUri);\n              return (\n                <TouchableOpacity\n                  key={index}\n                  onPress={() => handleImagePress(index)}\n                  style={styles.imageContainer}\n                >\n                  {imageUri ? (\n                    <Image source={{ uri: `${imageUri}?timestamp=${new Date().getTime()}` }} style={styles.image} />\n\n                  ) : (\n                    <Image source={DefaultImage} style={styles.image} /> // Use a default image here\n                  )}\n                </TouchableOpacity>\n              );\n            })}\n\n\n          </ScrollView>\n        </View>\n\n        <View style={styles.inputContainer}>\n          <Text style={styles.label}>Title</Text>\n          <TextInput\n            placeholder=\"Listing Title\"\n            placeholderTextColor=\"gray\"\n            value={propertyData.title}\n            onChangeText={(text) =>\n              setPropertyData({ ...propertyData, title: text }) // Fix the object reference to propertyData\n            }\n            style={styles.input}\n          />\n        </View>\n\n        <View style={styles.inputContainer}>\n          <Text style={styles.label}>Price</Text>\n          <TextInput\n            placeholder=\"$ Price\"\n            placeholderTextColor=\"gray\"\n            keyboardType=\"numeric\"\n            value={formattedPrice}\n            onChangeText={handlePriceChange}\n            style={styles.input}\n          />\n        </View>\n\n        <View style={styles.inputContainer}>\n          <Text style={styles.label}>Option Fee</Text>\n          <TextInput\n            placeholder=\"$ Option Fee Price\"\n            placeholderTextColor=\"gray\"\n            value={formattedOptionPrice}\n            keyboardType=\"numeric\"\n            onChangeText={handleOptionPriceChange}\n            style={styles.input}\n          />\n        </View>\n\n        <View style={styles.inputContainer}>\n          <Text style={styles.label}>Option Exercise Fee</Text>\n          <TextInput\n            placeholder=\"$ Option Exercise Fee Price\"\n            placeholderTextColor=\"gray\"\n            value={formattedOptionExercisePrice}\n            keyboardType=\"numeric\"\n            onChangeText={handleOptionExercisePriceChange}\n            style={styles.input}\n          />\n        </View>\n\n        <View style={styles.inputContainer}>\n          <Text style={styles.label}>Size (sqm)</Text>\n          <TextInput\n            placeholder=\"Size (sqm)\"\n            placeholderTextColor=\"gray\"\n            keyboardType=\"numeric\"\n            value={propertyData.size}\n            onChangeText={(text) =>\n              setPropertyData({ ...propertyData, size: text }) // Fix the object reference to propertyData\n            }\n            style={styles.input}\n          />\n        </View>\n\n        <View style={styles.inputContainer}>\n          <Text style={styles.label}>Bedrooms</Text>\n          <TextInput\n            placeholder=\"Number of Bedrooms\"\n            placeholderTextColor=\"gray\"\n            keyboardType=\"numeric\"\n            value={propertyData.bed}\n            onChangeText={(text) =>\n              setPropertyData({ ...propertyData, bed: text }) // Fix the object reference to propertyData\n            }\n            style={styles.input}\n          />\n        </View>\n\n        <View style={styles.inputContainer}>\n          <Text style={styles.label}>Bathrooms</Text>\n          <TextInput\n           placeholder=\"Number of Bathrooms\"\n           placeholderTextColor=\"gray\"\n           keyboardType=\"numeric\"\n            value={propertyData.bathroom}\n            onChangeText={(text) =>\n              setPropertyData({ ...propertyData, bathroom: text }) // Fix the object reference to propertyData\n            }\n            style={styles.input}\n          />\n        </View>\n\n        <View style={styles.inputContainer}>\n          <Text style={styles.label}>Postal Code</Text>\n          <TextInput\n            placeholder=\"Postal Code\"\n            placeholderTextColor=\"gray\"\n            maxLength={6}\n            keyboardType=\"numeric\"\n            value={propertyData.postalCode} // Display the postalCode from propertyData\n            onChangeText={handlePostalCodeChange}\n            style={styles.input}\n          />\n        </View>\n\n        <View style={styles.inputContainer}>\n          <Text style={styles.label}>Address</Text>\n          <TextInput\n            placeholder=\"Address\"\n            placeholderTextColor=\"gray\"\n            value={propertyData.address}\n            onChangeText={(text) =>\n              setPropertyData({ ...propertyData, address: text }) // Fix the object reference to propertyData\n            }\n            style={[styles.input, styles.mediumTypeInput]}\n            multiline={true}\n            numberOfLines={2}\n          />\n        </View>\n\n        <View style={styles.inputContainer}>\n          <Text style={styles.label}>Tenure</Text>\n          <TextInput\n            placeholder=\"Tenure (e.g. 99 years)\"\n            placeholderTextColor=\"gray\"\n            maxLength={3} // Restrict input to 6 characters\n            keyboardType=\"numeric\" // Show numeric keyboard\n            value={propertyData.tenure}\n            onChangeText={(text) => setPropertyData({ ...propertyData, tenure: text })}\n            style={styles.input}\n          />\n        </View>\n\n        <View style={styles.inputContainer}>\n          <Text style={styles.label}>Unit Number</Text>\n          <TextInput\n            placeholder=\"Unit Number (e.g. #17-360)\"\n            placeholderTextColor=\"gray\"\n            value={propertyData.unitNumber}\n            onChangeText={(text) =>\n              setPropertyData({ ...propertyData, unitNumber: text }) // Fix the object reference to propertyData\n            }\n            style={styles.input}\n          />\n        </View>\n\n        <View style={styles.inputContainer}>\n          <Text style={styles.label}>Description</Text>\n          <TextInput\n            placeholder=\"Description of Listing\"\n            placeholderTextColor=\"gray\"\n            value={propertyData.description}\n            onChangeText={(text) =>\n              setPropertyData({ ...propertyData, description: text }) // Fix the object reference to propertyData\n            }\n            style={[styles.input, styles.largeTextInput]}\n            multiline={true}\n            numberOfLines={4}\n          />\n        </View>\n\n        <View style={styles.inputContainer}>\n          <Text style={styles.label}>Property Type</Text>\n          <TouchableOpacity\n            style={styles.propertyTypePickerButton}\n            onPress={() => setPropertyTypeVisible(true)}\n          >\n            <Text style={styles.propertyTypePickerText}>\n              {propertyData.propertyType\n                ? propertyData.propertyType.charAt(0).toUpperCase() +\n                propertyData.propertyType.slice(1)\n                : 'Select Property Type'}\n            </Text>\n            <Icon name=\"caret-down\" size={20} color=\"black\" />\n          </TouchableOpacity>\n        </View>\n\n        <Modal\n          transparent={true}\n          animationType=\"slide\"\n          visible={propertyTypeVisible}\n          onRequestClose={() => setPropertyTypeVisible(false)}\n        >\n          <View style={styles.modalContainer}>\n            <Picker\n              selectedValue={propertyData.propertyType}\n              onValueChange={(value) =>\n                setPropertyData({ ...propertyData, propertyType: value })\n              }\n              style={styles.picker}\n            >\n              {propertyTypes.map((type, index) => (\n                <Picker.Item\n                  key={index}\n                  label={type.label}\n                  value={type.value}\n                />\n              ))}\n            </Picker>\n            <View style={styles.okButtonContainer}>\n              <Button\n                title=\"OK\"\n                onPress={() => setPropertyTypeVisible(false)}\n              />\n            </View>\n          </View>\n        </Modal>\n      </ScrollView>\n\n      <TouchableOpacity style={styles.saveChangesButton} onPress={handleSubmit}>\n        <Ionicons name=\"save-outline\" size={18} color=\"white\" />\n        <Text style={styles.saveChangesButtonText}>Update</Text>\n      </TouchableOpacity>\n\n      <FullScreenImage\n        imageUrl={fullScreenImage}\n        onClose={() => setFullScreenImage(null)} // Close the full-screen image view\n      />\n\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    padding: 20,\n  },\n  scrollView: {\n    flex: 1,\n    marginBottom: 10, // Adjust this margin to avoid overlap with the navigation bar\n  },\n  inputContainer: {\n    marginBottom: 10,\n  },\n  label: {\n    marginBottom: 5,\n    fontWeight: 'bold',\n  },\n  input: {\n    borderColor: 'gray',\n    borderWidth: 1,\n    marginBottom: 10,\n    padding: 8,\n    height: 40,\n    borderRadius: 5,\n  },\n  largeTextInput: {\n    height: 120,\n  },\n  mediumTypeInput: {\n    height: 60,\n  },\n  imageRow: {\n    flexDirection: 'row',\n    marginBottom: 10,\n    paddingVertical: 10,\n  },\n  imagePicker: {\n    alignItems: 'center',\n    justifyContent: 'center',\n    backgroundColor: '#ddd',\n    width: 100,\n    height: 100,\n    marginRight: 10,\n  },\n  imageContainer: {\n    position: 'relative',\n    marginRight: 10,\n  },\n  image: {\n    width: 100,\n    height: 100,\n  },\n  propertyTypePickerButton: {\n    borderWidth: 1,\n    borderRadius: 5,\n    paddingHorizontal: 10,\n    borderColor: 'gray',\n    fontSize: 14,\n    padding: 8,\n    width: '100%',\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n  },\n  propertyTypePickerText: {\n    fontSize: 14,\n  },\n  modalContainer: {\n    flex: 1,\n    justifyContent: 'flex-end',\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    paddingBottom: 20, // Add padding to make the button visible\n  },\n  picker: {\n    backgroundColor: 'white',\n  },\n  okButtonContainer: {\n    backgroundColor: 'white',\n  },\n  saveChangesButton: {\n    backgroundColor: 'green',\n    padding: 10,\n    borderRadius: 5,\n    marginTop: 10,\n    alignItems: 'center', // Center horizontally\n    flexDirection: 'row',\n    justifyContent: 'center', // Center vertically\n    width: '60%',\n    marginLeft: 70,\n  },\n  saveChangesButtonText: {\n    color: 'white',\n    marginLeft: 10,\n  },\n  headerContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: 20,\n  },\n  header: {\n    fontSize: 24,\n    fontWeight: 'bold',\n    marginLeft: 40,\n  },\n  scrollViewContent: {\n    paddingBottom: 100, // Adjust this value as needed to ensure the input field is visible\n  },\n});\n\nexport default EditPropertyListing;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}