{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, useEffect, useContext } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport Linking from \"react-native-web/dist/exports/Linking\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport { useStripe, StripeProvider } from '@stripe/stripe-react-native';\nimport { updateUserStripeCustomerId, initializePaymentSheet, createTokenTransactionRecord, fetchUpdatedUserDetails, handleDeepLink } from \"../../services/StripeServices\";\nimport { updateUserProfile } from \"../../utils/api\";\nimport { AuthContext } from \"../../AuthContext\";\nimport { useNavigation, useRoute } from '@react-navigation/native';\nimport { FontAwesome, Ionicons } from '@expo/vector-icons';\nimport { is } from 'date-fns/locale';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar TokenCheckoutScreen = function TokenCheckoutScreen(_ref) {\n  var route = _ref.route;\n  var _useContext = useContext(AuthContext),\n    user = _useContext.user,\n    login = _useContext.login;\n  var navigation = useNavigation();\n  var _useStripe = useStripe(),\n    initPaymentSheet = _useStripe.initPaymentSheet,\n    presentPaymentSheet = _useStripe.presentPaymentSheet,\n    handleURLCallback = _useStripe.handleURLCallback;\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    loading = _useState2[0],\n    setLoading = _useState2[1];\n  var _useState3 = useState(''),\n    _useState4 = _slicedToArray(_useState3, 2),\n    newStripeCustomerId = _useState4[0],\n    setStripeCustomerId = _useState4[1];\n  var _useState5 = useState(''),\n    _useState6 = _slicedToArray(_useState5, 2),\n    ephemeralKey = _useState6[0],\n    setEphemeralKey = _useState6[1];\n  var _useState7 = useState(''),\n    _useState8 = _slicedToArray(_useState7, 2),\n    paymentIntent = _useState8[0],\n    setPaymentIntent = _useState8[1];\n  var _useState9 = useState(''),\n    _useState10 = _slicedToArray(_useState9, 2),\n    publishableKey = _useState10[0],\n    setPublishableKey = _useState10[1];\n  var _useState11 = useState(false),\n    _useState12 = _slicedToArray(_useState11, 2),\n    custIdExists = _useState12[0],\n    setCustIdExists = _useState12[1];\n  var gst = 0.08;\n  var taxable = true;\n  var _route$params = route.params,\n    tokens = _route$params.tokens,\n    tokenAmount = _route$params.tokenAmount,\n    tokenName = _route$params.tokenName,\n    currentTokenAmount = _route$params.currentTokenAmount;\n  var stripeCustomerId = user.user.stripeCustomerId;\n  var initializePayment = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      yield initializePaymentSheet(stripeCustomerId, user.user, `Purchase Tokens: ${tokenName}`, tokenAmount, setStripeCustomerId, setEphemeralKey, setPaymentIntent, setPublishableKey, setCustIdExists, initPaymentSheet, setLoading, taxable);\n    });\n    return function initializePayment() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var handleSuccess = function () {\n    var _ref3 = _asyncToGenerator(function* () {\n      var updatedTokenAmount = currentTokenAmount + tokens;\n      try {\n        var formData = new FormData();\n        formData.append('token', updatedTokenAmount);\n        formData.append('email', user.user.email);\n        var _yield$updateUserProf = yield updateUserProfile(user.user.userId, formData),\n          success = _yield$updateUserProf.success,\n          data = _yield$updateUserProf.data,\n          message = _yield$updateUserProf.message;\n        if (success) {} else {\n          Alert.alert('Error', message || 'Purchase failed.');\n        }\n      } catch (error) {\n        console.error('Error updating user profile:', error);\n        Alert.alert('Error', 'Purchase failed.');\n      }\n    });\n    return function handleSuccess() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  var openPaymentSheet = function () {\n    var _ref4 = _asyncToGenerator(function* () {\n      try {\n        var _yield$presentPayment = yield presentPaymentSheet(),\n          error = _yield$presentPayment.error;\n        if (error) {\n          Alert.alert(`Error code: ${error.code}`, error.message);\n        } else {\n          if (custIdExists == false) {\n            updateUserStripeCustomerId(newStripeCustomerId, user.user, login);\n          }\n          var status = 'PAID';\n          var transactionType = 'TOKEN_PURCHASE';\n          var taxAmount = tokenAmount * gst;\n          var totalAmount = tokenAmount + taxAmount;\n          handleSuccess();\n          createTokenTransactionRecord(user.user, paymentIntent, status, transactionType, tokenName, tokens, tokenAmount, taxable);\n          Alert.alert('Purchase Successful', `You have purchased ${tokens} tokens.`);\n          navigation.navigate('Token');\n        }\n      } catch (error) {\n        console.error('Error opening payment sheet:', error);\n      }\n    });\n    return function openPaymentSheet() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n  useEffect(function () {\n    initializePayment();\n    var getUrlAsync = function () {\n      var _ref5 = _asyncToGenerator(function* () {\n        var initialUrl = yield Linking.getInitialURL();\n        handleDeepLink(initialUrl, handleURLCallback);\n      });\n      return function getUrlAsync() {\n        return _ref5.apply(this, arguments);\n      };\n    }();\n    getUrlAsync();\n    var deepLinkListener = Linking.addEventListener('url', function (event) {\n      handleDeepLink(event.url, handleURLCallback);\n    });\n    return function () {\n      return deepLinkListener.remove();\n    };\n  }, [handleURLCallback]);\n  return _jsx(View, {\n    style: styles.container,\n    children: _jsxs(StripeProvider, {\n      publishableKey: publishableKey,\n      children: [_jsxs(View, {\n        style: styles.headerContainer,\n        children: [_jsx(TouchableOpacity, {\n          style: styles.backButton,\n          onPress: function onPress() {\n            return navigation.goBack();\n          },\n          children: _jsx(Ionicons, {\n            name: \"arrow-back\",\n            size: 24,\n            color: \"black\"\n          })\n        }), _jsx(Text, {\n          style: styles.header,\n          children: \"Purchase Summary\"\n        })]\n      }), _jsxs(View, {\n        style: styles.itemContainer,\n        children: [_jsxs(View, {\n          style: styles.summaryItem,\n          children: [_jsx(Text, {\n            style: styles.label,\n            children: \"Item:\"\n          }), _jsx(Text, {\n            style: styles.info,\n            children: tokenName\n          })]\n        }), _jsxs(View, {\n          style: styles.summaryItem,\n          children: [_jsx(Text, {\n            style: styles.label,\n            children: \"Quantity:\"\n          }), _jsx(Text, {\n            style: styles.info,\n            children: tokens\n          })]\n        }), _jsxs(View, {\n          style: styles.summaryItem,\n          children: [_jsx(Text, {\n            style: styles.label,\n            children: \"Price:\"\n          }), _jsxs(Text, {\n            style: styles.info,\n            children: [\"SGD \", tokenAmount.toFixed(2)]\n          })]\n        }), _jsxs(View, {\n          style: styles.summaryItem,\n          children: [_jsx(Text, {\n            style: styles.label,\n            children: \"GST (8%):\"\n          }), _jsxs(Text, {\n            style: styles.info,\n            children: [\"SGD \", (tokenAmount * 0.08).toFixed(2)]\n          })]\n        })]\n      }), _jsxs(View, {\n        style: styles.checkoutContainer,\n        children: [_jsxs(View, {\n          style: styles.totalAmountContainer,\n          children: [_jsx(Text, {\n            style: styles.label,\n            children: \"Total Amount:\"\n          }), _jsxs(Text, {\n            style: styles.info,\n            children: [\"SGD \", (tokenAmount + tokenAmount * 0.08).toFixed(2)]\n          })]\n        }), _jsxs(TouchableOpacity, {\n          style: styles.checkoutButton,\n          onPress: openPaymentSheet,\n          disabled: !loading,\n          children: [_jsx(FontAwesome, {\n            name: \"shopping-cart\",\n            size: 24,\n            color: \"white\"\n          }), _jsx(Text, {\n            style: styles.checkoutButtonText,\n            children: \"Checkout\"\n          })]\n        })]\n      })]\n    })\n  });\n};\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    padding: 20,\n    backgroundColor: '#f5f5f5'\n  },\n  headerContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: 30\n  },\n  header: {\n    fontSize: 24,\n    fontWeight: 'bold',\n    color: '#333',\n    marginLeft: 70,\n    marginTop: 15,\n    paddingBottom: 20\n  },\n  itemContainer: {\n    flex: 1,\n    marginBottom: 20\n  },\n  summaryItem: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    marginBottom: 15,\n    padding: 10,\n    backgroundColor: 'white',\n    borderRadius: 10,\n    elevation: 2,\n    shadowColor: '#000',\n    shadowOffset: {\n      width: 0,\n      height: 2\n    },\n    shadowOpacity: 0.1,\n    shadowRadius: 2\n  },\n  checkoutContainer: {\n    borderTopColor: '#ddd',\n    borderTopWidth: 1,\n    padding: 10\n  },\n  totalAmountContainer: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    marginBottom: 15\n  },\n  checkoutButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    backgroundColor: '#4CAF50',\n    borderRadius: 25,\n    padding: 15,\n    elevation: 3,\n    shadowColor: '#000',\n    shadowOffset: {\n      width: 0,\n      height: 2\n    },\n    shadowOpacity: 0.3,\n    shadowRadius: 3\n  },\n  checkoutButtonText: {\n    color: 'white',\n    fontSize: 20,\n    fontWeight: 'bold',\n    marginLeft: 10\n  },\n  backButton: {\n    position: 'absolute',\n    top: 20,\n    left: 20,\n    zIndex: 1\n  },\n  label: {\n    fontSize: 16,\n    fontWeight: 'bold'\n  },\n  info: {\n    fontSize: 16\n  }\n});\nexport default TokenCheckoutScreen;","map":{"version":3,"names":["React","useState","useEffect","useContext","View","Text","Alert","Linking","StyleSheet","TouchableOpacity","useStripe","StripeProvider","updateUserStripeCustomerId","initializePaymentSheet","createTokenTransactionRecord","fetchUpdatedUserDetails","handleDeepLink","updateUserProfile","AuthContext","useNavigation","useRoute","FontAwesome","Ionicons","is","jsx","_jsx","jsxs","_jsxs","TokenCheckoutScreen","_ref","route","_useContext","user","login","navigation","_useStripe","initPaymentSheet","presentPaymentSheet","handleURLCallback","_useState","_useState2","_slicedToArray","loading","setLoading","_useState3","_useState4","newStripeCustomerId","setStripeCustomerId","_useState5","_useState6","ephemeralKey","setEphemeralKey","_useState7","_useState8","paymentIntent","setPaymentIntent","_useState9","_useState10","publishableKey","setPublishableKey","_useState11","_useState12","custIdExists","setCustIdExists","gst","taxable","_route$params","params","tokens","tokenAmount","tokenName","currentTokenAmount","stripeCustomerId","initializePayment","_ref2","_asyncToGenerator","apply","arguments","handleSuccess","_ref3","updatedTokenAmount","formData","FormData","append","email","_yield$updateUserProf","userId","success","data","message","alert","error","console","openPaymentSheet","_ref4","_yield$presentPayment","code","status","transactionType","taxAmount","totalAmount","navigate","getUrlAsync","_ref5","initialUrl","getInitialURL","deepLinkListener","addEventListener","event","url","remove","style","styles","container","children","headerContainer","backButton","onPress","goBack","name","size","color","header","itemContainer","summaryItem","label","info","toFixed","checkoutContainer","totalAmountContainer","checkoutButton","disabled","checkoutButtonText","create","flex","padding","backgroundColor","flexDirection","alignItems","marginBottom","fontSize","fontWeight","marginLeft","marginTop","paddingBottom","justifyContent","borderRadius","elevation","shadowColor","shadowOffset","width","height","shadowOpacity","shadowRadius","borderTopColor","borderTopWidth","position","top","left","zIndex"],"sources":["/Users/limzhongzhi/WebstormProjects/PropertyGo/frontend/mobile/screens/token/TokenCheckoutScreen.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\nimport { View, Text, Alert, Linking, StyleSheet, TouchableOpacity } from 'react-native';\nimport { useStripe, StripeProvider } from '@stripe/stripe-react-native';\nimport { updateUserStripeCustomerId, initializePaymentSheet, createTokenTransactionRecord, fetchUpdatedUserDetails, handleDeepLink } from '../../services/StripeServices';\nimport { updateUserProfile } from '../../utils/api';\nimport { AuthContext } from '../../AuthContext';\nimport { useNavigation, useRoute } from '@react-navigation/native';\nimport { FontAwesome, Ionicons } from '@expo/vector-icons'; // Import the desired icon library\nimport { is } from 'date-fns/locale';\n\nconst TokenCheckoutScreen = ({ route }) => {\n    const { user, login } = useContext(AuthContext);\n    const navigation = useNavigation();\n    const { initPaymentSheet, presentPaymentSheet, handleURLCallback } = useStripe();\n    const [loading, setLoading] = useState(false);\n    const [newStripeCustomerId, setStripeCustomerId] = useState('');\n    const [ephemeralKey, setEphemeralKey] = useState('');\n    const [paymentIntent, setPaymentIntent] = useState('');\n    const [publishableKey, setPublishableKey] = useState('');\n    const [custIdExists, setCustIdExists] = useState(false);\n    const gst = 0.08;\n    const taxable = true;\n\n    // Use the route object to get the selected token package details\n    const { tokens, tokenAmount, tokenName, currentTokenAmount } = route.params; // Make sure you pass the selected package from the previous screen\n\n    const stripeCustomerId = user.user.stripeCustomerId;\n\n    const initializePayment = async () => {\n        await initializePaymentSheet(\n            stripeCustomerId,\n            user.user,\n            `Purchase Tokens: ${tokenName}`,\n            tokenAmount, \n            setStripeCustomerId,\n            setEphemeralKey,\n            setPaymentIntent,\n            setPublishableKey,\n            setCustIdExists,\n            initPaymentSheet,\n            setLoading,\n            taxable,\n        );\n    };\n\n    const handleSuccess = async () => {\n        const updatedTokenAmount = currentTokenAmount + tokens;\n\n        try {\n            const formData = new FormData();\n            formData.append('token', updatedTokenAmount);\n            formData.append('email', user.user.email);\n\n            const { success, data, message } = await updateUserProfile(user.user.userId, formData);\n\n            if (success) {\n                // Alert.alert('Purchase Successful', `You have purchased ${tokens} tokens.`);\n            } else {\n                Alert.alert('Error', message || 'Purchase failed.');\n            }\n        } catch (error) {\n            console.error('Error updating user profile:', error);\n            Alert.alert('Error', 'Purchase failed.');\n        }\n\n    }\n\n    const openPaymentSheet = async () => {\n        try {\n            const { error } = await presentPaymentSheet();\n\n            if (error) {\n                Alert.alert(`Error code: ${error.code}`, error.message);\n            } else {\n                if (custIdExists == false) {\n                    updateUserStripeCustomerId(newStripeCustomerId, user.user, login);\n                }\n                const status = 'PAID';\n                const transactionType = 'TOKEN_PURCHASE';\n\n                // Calculate tax amount\n                const taxAmount = tokenAmount * gst;\n                // Calculate total amount including tax\n                const totalAmount = tokenAmount + taxAmount;\n\n                // Create a record for the token purchase transaction\n                handleSuccess();\n                createTokenTransactionRecord(user.user, paymentIntent, status, transactionType, tokenName, tokens, tokenAmount, taxable);\n\n                // Display the item, quantity, price, tax amount, and total amount\n                Alert.alert('Purchase Successful', `You have purchased ${tokens} tokens.`);\n\n                navigation.navigate('Token'); // Navigate back to the TokenScreen or any other desired screen\n            }\n        } catch (error) {\n            console.error('Error opening payment sheet:', error);\n        }\n    };\n\n    useEffect(() => {\n        initializePayment();\n\n        // Handle deep linking\n        const getUrlAsync = async () => {\n            const initialUrl = await Linking.getInitialURL();\n            handleDeepLink(initialUrl, handleURLCallback);\n        };\n\n        getUrlAsync();\n\n        const deepLinkListener = Linking.addEventListener('url', (event) => {\n            handleDeepLink(event.url, handleURLCallback);\n        });\n\n        return () => deepLinkListener.remove();\n    }, [handleURLCallback]);\n\n    return (\n        <View style={styles.container}>\n            <StripeProvider publishableKey={publishableKey}>\n                <View style={styles.headerContainer}>\n                    {/* Back button */}\n                    <TouchableOpacity style={styles.backButton} onPress={() => navigation.goBack()}>\n                        <Ionicons name=\"arrow-back\" size={24} color=\"black\" />\n                    </TouchableOpacity>\n                    <Text style={styles.header}>Purchase Summary</Text>\n                    {/* Help icon */}\n                </View>\n\n                <View style={styles.itemContainer}>\n                    <View style={styles.summaryItem}>\n                        <Text style={styles.label}>Item:</Text>\n                        <Text style={styles.info}>{tokenName}</Text>\n                    </View>\n                    <View style={styles.summaryItem}>\n                        <Text style={styles.label}>Quantity:</Text>\n                        <Text style={styles.info}>{tokens}</Text>\n                    </View>\n                    <View style={styles.summaryItem}>\n                        <Text style={styles.label}>Price:</Text>\n                        <Text style={styles.info}>SGD {tokenAmount.toFixed(2)}</Text>\n                    </View>\n                    <View style={styles.summaryItem}>\n                        <Text style={styles.label}>GST (8%):</Text>\n                        <Text style={styles.info}>SGD {(tokenAmount * 0.08).toFixed(2)}</Text>\n                    </View>\n                </View>\n\n                <View style={styles.checkoutContainer}>\n                    <View style={styles.totalAmountContainer}>\n                        <Text style={styles.label}>Total Amount:</Text>\n                        <Text style={styles.info}>SGD {(tokenAmount + tokenAmount * 0.08).toFixed(2)}</Text>\n                    </View>\n                    {/* Styled Checkout Button */}\n                    <TouchableOpacity\n                        style={styles.checkoutButton}\n                        onPress={openPaymentSheet}\n                        disabled={!loading}\n                    >\n                        <FontAwesome name=\"shopping-cart\" size={24} color=\"white\" />\n                        <Text style={styles.checkoutButtonText}>Checkout</Text>\n                    </TouchableOpacity>\n                </View>\n            </StripeProvider>\n        </View>\n    );\n};\n\nconst styles = StyleSheet.create({\n    container: {\n        flex: 1,\n        padding: 20,\n        backgroundColor: '#f5f5f5',\n    },\n    headerContainer: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        marginBottom: 30,\n    },\n    header: {\n        fontSize: 24,\n        fontWeight: 'bold',\n        color: '#333',\n        marginLeft: 70,\n        marginTop: 15,\n        paddingBottom: 20,\n    },\n    itemContainer: {\n        flex: 1,\n        marginBottom: 20,\n    },\n    summaryItem: {\n        flexDirection: 'row',\n        justifyContent: 'space-between',\n        marginBottom: 15,\n        padding: 10,\n        backgroundColor: 'white',\n        borderRadius: 10,\n        elevation: 2,\n        shadowColor: '#000',\n        shadowOffset: { width: 0, height: 2 },\n        shadowOpacity: 0.1,\n        shadowRadius: 2,\n    },\n    checkoutContainer: {\n        borderTopColor: '#ddd',\n        borderTopWidth: 1,\n        padding: 10,\n    },\n    totalAmountContainer: {\n        flexDirection: 'row',\n        justifyContent: 'space-between',\n        marginBottom: 15,\n    },\n    checkoutButton: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'center',\n        backgroundColor: '#4CAF50',\n        borderRadius: 25,\n        padding: 15,\n        elevation: 3,\n        shadowColor: '#000',\n        shadowOffset: { width: 0, height: 2 },\n        shadowOpacity: 0.3,\n        shadowRadius: 3,\n    },\n    checkoutButtonText: {\n        color: 'white',\n        fontSize: 20,\n        fontWeight: 'bold',\n        marginLeft: 10,\n    },\n    backButton: {\n        position: 'absolute',\n        top: 20,\n        left: 20,\n        zIndex: 1,\n    },\n    label: {\n        fontSize: 16,\n        fontWeight: 'bold',\n    },\n    info: {\n        fontSize: 16,\n    },\n});\n\nexport default TokenCheckoutScreen;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}