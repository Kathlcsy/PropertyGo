{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport { useNavigation } from '@react-navigation/native';\nimport { RFValue } from 'react-native-responsive-fontsize';\nimport * as Google from 'expo-auth-session/providers/google';\nimport * as WebBrowser from 'expo-web-browser';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar _Dimensions$get = Dimensions.get('window'),\n  width = _Dimensions$get.width,\n  height = _Dimensions$get.height;\nWebBrowser.maybeCompleteAuthSession();\nvar LoginSelection = function LoginSelection() {\n  var navigation = useNavigation();\n  var _React$useState = React.useState(''),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    accessToken = _React$useState2[0],\n    setAccessToken = _React$useState2[1];\n  var _React$useState3 = React.useState(null),\n    _React$useState4 = _slicedToArray(_React$useState3, 2),\n    user = _React$useState4[0],\n    setUser = _React$useState4[1];\n  var _Google$useIdTokenAut = Google.useIdTokenAuthRequest({\n      iosClientId: '975614309732-aef963hu3lkfus4u3jqnnkmm263vb7v7.apps.googleusercontent.com',\n      webClientId: '975614309732-7efv821237vv7prh9oq73vek4bv2h4il.apps.googleusercontent.com'\n    }),\n    _Google$useIdTokenAut2 = _slicedToArray(_Google$useIdTokenAut, 3),\n    request = _Google$useIdTokenAut2[0],\n    response = _Google$useIdTokenAut2[1],\n    promptAsync = _Google$useIdTokenAut2[2];\n  React.useEffect(function () {\n    if ((response == null ? void 0 : response.type) === 'success') {\n      setAccessToken(response.authentication.accessToken);\n      var id_token = response.params.id_token;\n      fetch('http://10.0.0.17:3000/auth/google-signin', {\n        method: 'POST',\n        headers: {\n          Authorization: `Bearer ${id_token}`\n        }\n      }).then(function (res) {\n        return res.json();\n      }).then(function (data) {\n        navigation.navigate('Home Page');\n      }).catch(function (error) {\n        console.error(error);\n      });\n    }\n  }, [response]);\n  function fetchUserInfo() {\n    return _fetchUserInfo.apply(this, arguments);\n  }\n  function _fetchUserInfo() {\n    _fetchUserInfo = _asyncToGenerator(function* () {\n      var response = yield fetch(\"https://www.googleapis.com/userinfo/v2/me\", {\n        headers: {\n          Authorization: `Bearer ${accessToken}`\n        }\n      });\n      var useInfo = yield response.json();\n      setUser(useInfo);\n    });\n    return _fetchUserInfo.apply(this, arguments);\n  }\n  var ShowUserInfo = function ShowUserInfo() {\n    if (user) {\n      return _jsxs(View, {\n        style: {\n          flex: 1,\n          alignItems: 'center',\n          justifyContent: 'center'\n        },\n        children: [_jsx(Text, {\n          style: {\n            fontSize: 35,\n            fontWeight: 'bold',\n            marginBottom: 20\n          },\n          children: \"Welcome\"\n        }), _jsx(Image, {\n          source: {\n            uri: user.picture\n          },\n          style: {\n            width: 100,\n            height: 100,\n            borderRadius: 50\n          }\n        }), _jsx(Text, {\n          style: {\n            fontSize: 20,\n            fontWeight: 'bold'\n          },\n          children: user.name\n        })]\n      });\n    }\n  };\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsx(Text, {\n      style: styles.welcomeText,\n      children: \"Welcome to PropertyGo!\"\n    }), _jsx(Image, {\n      source: require(\"../../assets/PropertyGo-HighRes-Logo.png\"),\n      style: styles.icon\n    }), _jsx(TouchableOpacity, {\n      style: styles.button,\n      onPress: function onPress() {\n        return navigation.navigate('Login');\n      },\n      children: _jsx(Text, {\n        style: styles.buttonText,\n        children: \"Sign In with Email\"\n      })\n    }), _jsx(TouchableOpacity, {\n      style: styles.socialButton,\n      onPress: function onPress() {\n        return promptAsync();\n      },\n      children: _jsx(Text, {\n        style: styles.socialButtonText,\n        children: \"Sign In with Google\"\n      })\n    })]\n  });\n};\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n    backgroundColor: '#FFFFFF'\n  },\n  welcomeText: {\n    fontWeight: 'bold',\n    fontSize: RFValue(24, 680),\n    color: 'black',\n    marginBottom: 60\n  },\n  icon: {\n    width: width * 0.5,\n    height: height * 0.2,\n    resizeMode: 'contain',\n    marginBottom: 80\n  },\n  button: {\n    alignItems: 'center',\n    justifyContent: 'center',\n    padding: 15,\n    borderRadius: 25,\n    backgroundColor: '#1E90FF',\n    width: width * 0.8,\n    marginVertical: 10\n  },\n  buttonText: {\n    color: '#fff',\n    fontSize: RFValue(16, 680)\n  },\n  socialButton: {\n    alignItems: 'center',\n    justifyContent: 'center',\n    padding: 15,\n    borderRadius: 25,\n    backgroundColor: '#4267B2',\n    width: width * 0.8,\n    marginVertical: 10\n  },\n  socialButtonText: {\n    color: '#fff',\n    fontSize: RFValue(16, 680)\n  }\n});\nexport default LoginSelection;","map":{"version":3,"names":["React","StyleSheet","View","Text","Image","TouchableOpacity","Dimensions","useNavigation","RFValue","Google","WebBrowser","jsx","_jsx","jsxs","_jsxs","_Dimensions$get","get","width","height","maybeCompleteAuthSession","LoginSelection","navigation","_React$useState","useState","_React$useState2","_slicedToArray","accessToken","setAccessToken","_React$useState3","_React$useState4","user","setUser","_Google$useIdTokenAut","useIdTokenAuthRequest","iosClientId","webClientId","_Google$useIdTokenAut2","request","response","promptAsync","useEffect","type","authentication","id_token","params","fetch","method","headers","Authorization","then","res","json","data","navigate","catch","error","console","fetchUserInfo","_fetchUserInfo","apply","arguments","_asyncToGenerator","useInfo","ShowUserInfo","style","flex","alignItems","justifyContent","children","fontSize","fontWeight","marginBottom","source","uri","picture","borderRadius","name","styles","container","welcomeText","require","icon","button","onPress","buttonText","socialButton","socialButtonText","create","backgroundColor","color","resizeMode","padding","marginVertical"],"sources":["/Users/wayneonn/Code/PropertyGo/frontend/mobile/screens/login/LoginSelection.js"],"sourcesContent":["import React from 'react';\nimport { StyleSheet, View, Text, Image, TouchableOpacity, Dimensions } from 'react-native';\nimport { useNavigation } from '@react-navigation/native';\nimport { RFValue } from 'react-native-responsive-fontsize';\nimport * as Google from 'expo-auth-session/providers/google';\nimport * as WebBrowser from 'expo-web-browser';\n\nconst { width, height } = Dimensions.get('window');\n\nWebBrowser.maybeCompleteAuthSession();\n\nconst LoginSelection = () => {\n  const navigation = useNavigation();\n  const [accessToken, setAccessToken] = React.useState('');\n  const [user, setUser] = React.useState(null);\n  const [request, response, promptAsync] = Google.useIdTokenAuthRequest({\n    iosClientId: '975614309732-aef963hu3lkfus4u3jqnnkmm263vb7v7.apps.googleusercontent.com',\n    webClientId: '975614309732-7efv821237vv7prh9oq73vek4bv2h4il.apps.googleusercontent.com',\n  });\n\n  React.useEffect(() => {\n    if (response?.type === 'success') {\n        setAccessToken(response.authentication.accessToken);\n      const { id_token } = response.params;\n      \n      // Send the id_token to your backend for verification\n      fetch('http://10.0.0.17:3000/auth/google-signin', {\n        method: 'POST',\n        headers: {\n          Authorization: `Bearer ${id_token}`,\n        },\n      })\n      .then(res => res.json())\n      .then(data => {\n        // Handle the user data response\n        navigation.navigate('Home Page');\n      })\n      .catch(error => {\n        console.error(error);\n      });\n    }\n  }, [response]);\n\n  async function fetchUserInfo() {\n    let response = await fetch(\"https://www.googleapis.com/userinfo/v2/me\", {\n      headers: { Authorization: `Bearer ${accessToken}` }\n    });\n    const useInfo = await response.json();\n    setUser(useInfo);\n  }\n\n  const ShowUserInfo = () => {\n    if(user) {\n      return(\n        <View style={{flex: 1, alignItems: 'center', justifyContent: 'center'}}>\n          <Text style={{fontSize: 35, fontWeight: 'bold', marginBottom: 20}}>Welcome</Text>\n          <Image source={{uri: user.picture}} style={{width: 100, height: 100, borderRadius: 50}} />\n          <Text style={{fontSize: 20, fontWeight: 'bold'}}>{user.name}</Text>\n        </View>\n      )\n    }\n  }\n\n  return (\n    <View style={styles.container}>\n      <Text style={styles.welcomeText}>Welcome to PropertyGo!</Text>\n      <Image source={require('../../assets/PropertyGo-HighRes-Logo.png')} style={styles.icon} />\n      <TouchableOpacity style={styles.button} onPress={() => navigation.navigate('Login')}>\n        <Text style={styles.buttonText}>Sign In with Email</Text>\n      </TouchableOpacity>\n      {/* Add the following button */}\n      <TouchableOpacity style={styles.socialButton} onPress={() => promptAsync()}>\n        <Text style={styles.socialButtonText}>Sign In with Google</Text>\n      </TouchableOpacity>\n      {/* Add your other social sign-in methods here */}\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n    container: {\n        flex: 1,\n        alignItems: 'center',\n        justifyContent: 'center',\n        backgroundColor: '#FFFFFF',\n    },\n    welcomeText: {\n        fontWeight: 'bold',\n        fontSize: RFValue(24, 680),\n        color: 'black',\n        marginBottom: 60,\n    },\n    icon: {\n        width: width * 0.5,\n        height: height * 0.2,\n        resizeMode: 'contain',\n        marginBottom: 80,\n    },\n    button: {\n        alignItems: 'center',\n        justifyContent: 'center',\n        padding: 15,\n        borderRadius: 25,\n        backgroundColor: '#1E90FF',\n        width: width * 0.8,\n        marginVertical: 10,\n    },\n    buttonText: {\n        color: '#fff',\n        fontSize: RFValue(16, 680),\n    },\n    socialButton: {\n        alignItems: 'center',\n        justifyContent: 'center',\n        padding: 15,\n        borderRadius: 25,\n        backgroundColor: '#4267B2',\n        width: width * 0.8,\n        marginVertical: 10,\n    },\n    socialButtonText: {\n        color: '#fff',\n        fontSize: RFValue(16, 680),\n    },\n});\n\n\nexport default LoginSelection;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}