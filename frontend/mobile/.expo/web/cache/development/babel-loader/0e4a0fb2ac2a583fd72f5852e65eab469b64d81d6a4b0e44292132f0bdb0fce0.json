{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, useContext, useCallback, useEffect } from 'react';\nimport { AuthContext } from \"../../AuthContext\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport RefreshControl from \"react-native-web/dist/exports/RefreshControl\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport TouchableHighlight from \"react-native-web/dist/exports/TouchableHighlight\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport { useFocusEffect, useRoute } from '@react-navigation/native';\nimport ForumPostItem from \"../../components/Forum/ForumPostItem\";\nimport { updateForumCommentFlaggedStatus, deleteForumComment, getAllForumComment, createForumComment } from \"../../utils/forumCommentApi\";\nimport { updateForumPostFlaggedStatus, deleteForumPost, getAllForumPostById } from \"../../utils/forumPostApi\";\nimport ForumCommentItem from \"../../components/Forum/ForumCommenItem\";\nimport * as ImagePicker from 'expo-image-picker';\nimport { AntDesign, Ionicons } from '@expo/vector-icons';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar ForumComment = function ForumComment(_ref) {\n  var navigation = _ref.navigation;\n  var _useContext = useContext(AuthContext),\n    user = _useContext.user;\n  var route = useRoute();\n  var _useState = useState(route.params.post),\n    _useState2 = _slicedToArray(_useState, 2),\n    post = _useState2[0],\n    setPost = _useState2[1];\n  var _useState3 = useState([]),\n    _useState4 = _slicedToArray(_useState3, 2),\n    comments = _useState4[0],\n    setComments = _useState4[1];\n  var _useState5 = useState(false),\n    _useState6 = _slicedToArray(_useState5, 2),\n    refreshing = _useState6[0],\n    setRefreshing = _useState6[1];\n  var _useState7 = useState(''),\n    _useState8 = _slicedToArray(_useState7, 2),\n    message = _useState8[0],\n    setMessage = _useState8[1];\n  var _useState9 = useState([]),\n    _useState10 = _slicedToArray(_useState9, 2),\n    imageUris = _useState10[0],\n    setImageUris = _useState10[1];\n  var _useState11 = useState(null),\n    _useState12 = _slicedToArray(_useState11, 2),\n    selectedImageIndex = _useState12[0],\n    setSelectedImageIndex = _useState12[1];\n  useEffect(function () {\n    _asyncToGenerator(function* () {\n      var _yield$ImagePicker$re = yield ImagePicker.requestMediaLibraryPermissionsAsync(),\n        status = _yield$ImagePicker$re.status;\n      if (status !== 'granted') {\n        alert('Permission to access camera roll is required!');\n      }\n    })();\n  }, []);\n  var useForumPostCallback = useCallback(function () {\n    var fetchData = function () {\n      var _ref3 = _asyncToGenerator(function* () {\n        try {\n          var forumPost = yield getAllForumPostById(post.forumPostId);\n          setPost(forumPost);\n        } catch (error) {\n          console.error(error);\n        }\n      });\n      return function fetchData() {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n    fetchData();\n  }, []);\n  var useParentCallback = useCallback(function () {\n    var fetchData = function () {\n      var _ref4 = _asyncToGenerator(function* () {\n        try {\n          var forumComment = yield getAllForumComment(user.user.userId, post.forumPostId, \"vote\", false);\n          setComments(forumComment);\n        } catch (error) {\n          console.error(error);\n        }\n      });\n      return function fetchData() {\n        return _ref4.apply(this, arguments);\n      };\n    }();\n    fetchData();\n  }, []);\n  useFocusEffect(useParentCallback);\n  var handleFlag = function () {\n    var _ref5 = _asyncToGenerator(function* (forumPostId) {\n      yield updateForumPostFlaggedStatus(user.user.userId, forumPostId);\n      navigation.goBack();\n    });\n    return function handleFlag(_x) {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n  var handleDelete = function () {\n    var _ref6 = _asyncToGenerator(function* (forumPostId) {\n      try {\n        yield deleteForumPost(user.user.userId, forumPostId);\n        navigation.goBack();\n      } catch (error) {\n        console.error(error);\n      }\n    });\n    return function handleDelete(_x2) {\n      return _ref6.apply(this, arguments);\n    };\n  }();\n  var handleDeleteComment = function () {\n    var _ref7 = _asyncToGenerator(function* (forumCommentId) {\n      try {\n        yield deleteForumComment(user.user.userId, forumCommentId);\n        useParentCallback();\n      } catch (error) {\n        console.error(error);\n      }\n    });\n    return function handleDeleteComment(_x3) {\n      return _ref7.apply(this, arguments);\n    };\n  }();\n  var handleFlagComment = function () {\n    var _ref8 = _asyncToGenerator(function* (forumCommentId) {\n      try {\n        yield updateForumCommentFlaggedStatus(user.user.userId, forumCommentId);\n        useParentCallback();\n      } catch (error) {\n        console.error(error);\n      }\n    });\n    return function handleFlagComment(_x4) {\n      return _ref8.apply(this, arguments);\n    };\n  }();\n  var handleRefresh = function () {\n    var _ref9 = _asyncToGenerator(function* () {\n      setRefreshing(true);\n      useParentCallback();\n      setRefreshing(false);\n    });\n    return function handleRefresh() {\n      return _ref9.apply(this, arguments);\n    };\n  }();\n  var handleImageUpload = function () {\n    var _ref10 = _asyncToGenerator(function* () {\n      var result = yield ImagePicker.launchImageLibraryAsync({\n        mediaTypes: ImagePicker.MediaTypeOptions.Images,\n        allowsEditing: true,\n        quality: 1,\n        multiple: true\n      });\n      if (!result.canceled) {\n        var selectedImages = result.assets.map(function (asset) {\n          return asset.uri;\n        });\n        if (imageUris.length + selectedImages.length <= 5) {\n          setImageUris([].concat(_toConsumableArray(imageUris), _toConsumableArray(selectedImages)));\n        }\n      }\n    });\n    return function handleImageUpload() {\n      return _ref10.apply(this, arguments);\n    };\n  }();\n  var handleImageRemove = function handleImageRemove(index) {\n    var updatedImageUris = _toConsumableArray(imageUris);\n    updatedImageUris.splice(index, 1);\n    setImageUris(updatedImageUris);\n    if (selectedImageIndex === index) {\n      setSelectedImageIndex(null);\n    }\n  };\n  var handleSubmit = function () {\n    var _ref11 = _asyncToGenerator(function* () {\n      var formData = new FormData();\n      var uniqueId = `${Date.now()}-${Math.floor(Math.random() * 10000)}`;\n      for (var i = 0; i < imageUris.length; i++) {\n        var imageUri = imageUris[i];\n        formData.append(\"images\", {\n          uri: imageUri,\n          type: \"image/jpeg\",\n          name: `image${uniqueId}_${i}.jpg`\n        });\n      }\n      formData.append('message', message);\n      formData.append('forumPostId', post.forumPostId);\n      try {\n        var forumComment = yield createForumComment(user.user.userId, formData);\n        useParentCallback();\n      } catch (error) {\n        console.error(error);\n      }\n      setMessage('');\n      setImageUris([]);\n    });\n    return function handleSubmit() {\n      return _ref11.apply(this, arguments);\n    };\n  }();\n  return _jsxs(SafeAreaView, {\n    style: styles.container,\n    children: [_jsxs(ScrollView, {\n      refreshControl: _jsx(RefreshControl, {\n        refreshing: refreshing,\n        onRefresh: handleRefresh,\n        tintColor: '#FFD700'\n      }),\n      children: [_jsx(ForumPostItem, {\n        userId: user.user.userId,\n        post: post,\n        onReport: function onReport() {\n          return handleFlag(post.forumPostId);\n        },\n        onDelete: function onDelete() {\n          return handleDelete(post.forumPostId);\n        },\n        useParentCallback: useForumPostCallback\n      }, post.forumPostId), comments.map(function (comment, index) {\n        return _jsx(ForumCommentItem, {\n          userId: user.user.userId,\n          comment: comment,\n          onReport: function onReport() {\n            return handleFlagComment(comment.forumCommentId);\n          },\n          onDelete: function onDelete() {\n            return handleDeleteComment(comment.forumCommentId);\n          },\n          useParentCallback: useParentCallback\n        }, comment.forumCommentId);\n      })]\n    }), _jsxs(View, {\n      children: [imageUris.length !== 0 ? _jsx(Text, {\n        style: styles.warningLabel,\n        children: \"Upload Maximum of 5 Images!\"\n      }) : null, _jsx(ScrollView, {\n        horizontal: true,\n        children: imageUris.map(function (uri, index) {\n          return _jsxs(View, {\n            style: {\n              margin: 5,\n              position: 'relative'\n            },\n            children: [_jsx(Image, {\n              source: {\n                uri: uri\n              },\n              style: styles.selectedImage\n            }), _jsx(TouchableHighlight, {\n              style: styles.removeImageButton,\n              onPress: function onPress() {\n                return handleImageRemove(index);\n              },\n              underlayColor: \"#EAEAEA\",\n              children: _jsx(AntDesign, {\n                name: \"delete\",\n                size: 24,\n                color: \"black\"\n              })\n            })]\n          }, index);\n        })\n      }), _jsxs(View, {\n        style: styles.horizontalContainer,\n        children: [_jsx(TextInput, {\n          placeholder: \"Type your message here\",\n          value: message,\n          onChangeText: function onChangeText(text) {\n            return setMessage(text);\n          },\n          style: styles.textInput,\n          multiline: true\n        }), _jsx(TouchableHighlight, {\n          style: styles.iconButton,\n          onPress: handleImageUpload,\n          underlayColor: \"rgba(0, 0, 0, 0.1)\",\n          children: _jsx(Ionicons, {\n            name: \"image-outline\",\n            size: 30,\n            color: \"black\"\n          })\n        }), _jsx(TouchableHighlight, {\n          style: styles.iconButton,\n          onPress: handleSubmit,\n          disabled: !message && imageUris.length === 0,\n          underlayColor: \"rgba(0, 0, 0, 0.1)\",\n          children: _jsx(Ionicons, {\n            name: \"send-outline\",\n            size: 24,\n            color: \"black\"\n          })\n        })]\n      })]\n    })]\n  });\n};\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    marginVertical: 10\n  },\n  horizontalContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    backgroundColor: 'white',\n    borderRadius: 10,\n    marginHorizontal: 10,\n    borderWidth: 1\n  },\n  textInput: {\n    flex: 1,\n    paddingVertical: 10,\n    marginLeft: 10\n  },\n  iconButton: {\n    padding: 10\n  },\n  selectedImage: {\n    width: 200,\n    height: 200,\n    resizeMode: 'cover',\n    marginBottom: 10\n  },\n  buttonText: {\n    color: 'black',\n    fontWeight: 'bold'\n  },\n  buttonDisabled: {\n    opacity: 0.5,\n    backgroundColor: 'gray'\n  },\n  selectedImage: {\n    width: 150,\n    height: 150\n  },\n  removeImageButton: {\n    backgroundColor: '#ccc',\n    padding: 5,\n    borderRadius: 5,\n    marginTop: 5,\n    alignItems: 'center'\n  },\n  warningLabel: {\n    fontSize: 12,\n    marginHorizontal: 5,\n    marginBottom: 5,\n    textAlign: 'left',\n    alignSelf: 'flex-start',\n    color: \"red\"\n  }\n});\nexport default ForumComment;","map":{"version":3,"names":["React","useState","useContext","useCallback","useEffect","AuthContext","StyleSheet","View","Text","TouchableOpacity","ScrollView","SafeAreaView","TextInput","RefreshControl","Image","TouchableHighlight","Button","useFocusEffect","useRoute","ForumPostItem","updateForumCommentFlaggedStatus","deleteForumComment","getAllForumComment","createForumComment","updateForumPostFlaggedStatus","deleteForumPost","getAllForumPostById","ForumCommentItem","ImagePicker","AntDesign","Ionicons","jsx","_jsx","jsxs","_jsxs","ForumComment","_ref","navigation","_useContext","user","route","_useState","params","post","_useState2","_slicedToArray","setPost","_useState3","_useState4","comments","setComments","_useState5","_useState6","refreshing","setRefreshing","_useState7","_useState8","message","setMessage","_useState9","_useState10","imageUris","setImageUris","_useState11","_useState12","selectedImageIndex","setSelectedImageIndex","_asyncToGenerator","_yield$ImagePicker$re","requestMediaLibraryPermissionsAsync","status","alert","useForumPostCallback","fetchData","_ref3","forumPost","forumPostId","error","console","apply","arguments","useParentCallback","_ref4","forumComment","userId","handleFlag","_ref5","goBack","_x","handleDelete","_ref6","_x2","handleDeleteComment","_ref7","forumCommentId","_x3","handleFlagComment","_ref8","_x4","handleRefresh","_ref9","handleImageUpload","_ref10","result","launchImageLibraryAsync","mediaTypes","MediaTypeOptions","Images","allowsEditing","quality","multiple","canceled","selectedImages","assets","map","asset","uri","length","concat","_toConsumableArray","handleImageRemove","index","updatedImageUris","splice","handleSubmit","_ref11","formData","FormData","uniqueId","Date","now","Math","floor","random","i","imageUri","append","type","name","style","styles","container","children","refreshControl","onRefresh","tintColor","onReport","onDelete","comment","warningLabel","horizontal","margin","position","source","selectedImage","removeImageButton","onPress","underlayColor","size","color","horizontalContainer","placeholder","value","onChangeText","text","textInput","multiline","iconButton","disabled","create","flex","marginVertical","flexDirection","alignItems","justifyContent","backgroundColor","borderRadius","marginHorizontal","borderWidth","paddingVertical","marginLeft","padding","width","height","resizeMode","marginBottom","buttonText","fontWeight","buttonDisabled","opacity","marginTop","fontSize","textAlign","alignSelf"],"sources":["/Users/kathleen/Documents/IS4103Capstone/PropertyGo/frontend/mobile/screens/forum/ForumComment.js"],"sourcesContent":["import React, { useState, useContext, useCallback, useEffect } from 'react';\nimport { AuthContext } from '../../AuthContext';\nimport { StyleSheet, View, Text, TouchableOpacity, ScrollView, SafeAreaView, TextInput, RefreshControl, Image, TouchableHighlight, Button } from 'react-native';\nimport { useFocusEffect, useRoute } from '@react-navigation/native';\nimport ForumPostItem from '../../components/Forum/ForumPostItem';\nimport { updateForumCommentFlaggedStatus, deleteForumComment, getAllForumComment, createForumComment } from '../../utils/forumCommentApi';\nimport { updateForumPostFlaggedStatus, deleteForumPost, getAllForumPostById } from '../../utils/forumPostApi';\nimport ForumCommentItem from '../../components/Forum/ForumCommenItem';\nimport * as ImagePicker from 'expo-image-picker';\nimport { AntDesign, Ionicons } from '@expo/vector-icons';\n\nconst ForumComment = ({ navigation }) => {\n\n    const { user } = useContext(AuthContext);\n    const route = useRoute();\n    const [post, setPost] = useState(route.params.post);\n    const [comments, setComments] = useState([]);\n    const [refreshing, setRefreshing] = useState(false);\n    const [message, setMessage] = useState('');\n    const [imageUris, setImageUris] = useState([]);\n    const [selectedImageIndex, setSelectedImageIndex] = useState(null);\n\n    useEffect(() => {\n        (async () => {\n            const { status } = await ImagePicker.requestMediaLibraryPermissionsAsync();\n            if (status !== 'granted') {\n                alert('Permission to access camera roll is required!');\n            }\n        })();\n    }, []);\n\n    const useForumPostCallback = useCallback(() => {\n        const fetchData = async () => {\n            try {\n                const forumPost = await getAllForumPostById(post.forumPostId);\n                setPost(forumPost);\n                // console.log(post)\n\n            } catch (error) {\n                console.error(error);\n            }\n        }\n\n        fetchData();\n    }, [])\n\n    const useParentCallback = useCallback(() => {\n        const fetchData = async () => {\n            try {\n                const forumComment = await getAllForumComment(user.user.userId, post.forumPostId, \"vote\", false);\n                // console.log(forumComment);\n                setComments(forumComment);\n\n            } catch (error) {\n                console.error(error);\n            }\n        }\n\n        fetchData();\n    }, [])\n\n    useFocusEffect(useParentCallback);\n\n    const handleFlag = async (forumPostId) => {\n        await updateForumPostFlaggedStatus(user.user.userId, forumPostId);\n        navigation.goBack();\n    };\n\n    const handleDelete = async (forumPostId) => {\n        try {\n            await deleteForumPost(user.user.userId, forumPostId)\n            // route.params.callback();\n            navigation.goBack();\n        } catch (error) {\n            console.error(error);\n        }\n    };\n\n    const handleDeleteComment = async (forumCommentId) => {\n        try {\n            await deleteForumComment(user.user.userId, forumCommentId);\n            useParentCallback();\n        } catch (error) {\n            console.error(error);\n        }\n    };\n\n    const handleFlagComment = async (forumCommentId) => {\n        try {\n            await updateForumCommentFlaggedStatus(user.user.userId, forumCommentId);\n            useParentCallback();\n        } catch (error) {\n            console.error(error);\n        }\n\n    };\n\n    const handleRefresh = async () => {\n        setRefreshing(true);\n        useParentCallback();\n        setRefreshing(false);\n    };\n\n    const handleImageUpload = async () => {\n        const result = await ImagePicker.launchImageLibraryAsync({\n            mediaTypes: ImagePicker.MediaTypeOptions.Images,\n            allowsEditing: true,\n            quality: 1,\n            multiple: true,\n        });\n\n        if (!result.canceled) {\n            const selectedImages = result.assets.map(asset => asset.uri);\n            // Check the number of selected images before adding them\n            if (imageUris.length + selectedImages.length <= 5) {\n                setImageUris([...imageUris, ...selectedImages]);\n            }\n        }\n    };\n\n    const handleImageRemove = (index) => {\n        const updatedImageUris = [...imageUris];\n        updatedImageUris.splice(index, 1);\n        setImageUris(updatedImageUris);\n\n        // Clear the selected image if it was removed\n        if (selectedImageIndex === index) {\n            setSelectedImageIndex(null);\n        }\n    };\n\n    const handleSubmit = async () => {\n        const formData = new FormData();\n        const uniqueId = `${Date.now()}-${Math.floor(Math.random() * 10000)}`;\n\n        // Append each image to the formData\n        for (let i = 0; i < imageUris.length; i++) {\n            const imageUri = imageUris[i];\n            formData.append(\"images\", {\n                uri: imageUri,\n                type: \"image/jpeg\",\n                name: `image${uniqueId}_${i}.jpg`,\n            });\n        }\n\n\n        formData.append('message', message);\n        formData.append('forumPostId', post.forumPostId);\n\n        try {\n            const forumComment = await createForumComment(user.user.userId, formData);\n            useParentCallback();\n        } catch (error) {\n            console.error(error);\n        }\n\n        // Reset the input fields after submission\n        setMessage('');\n        setImageUris([]);\n    };\n\n    return (\n        <SafeAreaView style={styles.container}>\n            <ScrollView\n                refreshControl={\n                    <RefreshControl\n                        refreshing={refreshing}\n                        onRefresh={handleRefresh}\n                        tintColor={'#FFD700'}\n                    />\n                }\n            >\n                <ForumPostItem\n                    key={post.forumPostId}\n                    userId={user.user.userId}\n                    post={post}\n                    // onPress={() => handlePostPress(post)}\n                    onReport={() => handleFlag(post.forumPostId)}\n                    onDelete={() => handleDelete(post.forumPostId)}\n                    useParentCallback={useForumPostCallback}\n                />\n                {comments.map((comment, index) => (\n                    <ForumCommentItem\n                        key={comment.forumCommentId}\n                        userId={user.user.userId}\n                        comment={comment}\n                        onReport={() => handleFlagComment(comment.forumCommentId)}\n                        onDelete={() => handleDeleteComment(comment.forumCommentId)}\n                        useParentCallback={useParentCallback}\n                    />\n                ))}\n\n            </ScrollView>\n            <View>\n                {imageUris.length !== 0 ? <Text style={styles.warningLabel}>Upload Maximum of 5 Images!</Text> : null}\n                <ScrollView horizontal>\n                    {imageUris.map((uri, index) => (\n                        <View key={index} style={{ margin: 5, position: 'relative' }}>\n                            <Image source={{ uri }} style={styles.selectedImage} />\n                            <TouchableHighlight\n                                style={styles.removeImageButton}\n                                onPress={() => handleImageRemove(index)}\n                                underlayColor=\"#EAEAEA\"\n                            >\n                                <AntDesign name=\"delete\" size={24} color=\"black\" />\n                            </TouchableHighlight>\n                        </View>\n\n                    ))}\n                </ScrollView>\n\n                <View style={styles.horizontalContainer}>\n                    <TextInput\n                        placeholder=\"Type your message here\"\n                        value={message}\n                        onChangeText={text => setMessage(text)}\n                        style={styles.textInput}\n                        multiline // Allow multiline text input\n                    />\n                    <TouchableHighlight style={styles.iconButton} onPress={handleImageUpload} underlayColor=\"rgba(0, 0, 0, 0.1)\">\n                        <Ionicons name=\"image-outline\" size={30} color=\"black\" />\n                    </TouchableHighlight>\n                    <TouchableHighlight style={styles.iconButton} onPress={handleSubmit} disabled={!message && imageUris.length === 0} underlayColor=\"rgba(0, 0, 0, 0.1)\">\n                        <Ionicons name=\"send-outline\" size={24} color=\"black\" />\n                    </TouchableHighlight>\n                </View>\n            </View>\n\n        </SafeAreaView >\n\n    );\n};\nconst styles = StyleSheet.create({\n    container: {\n        flex: 1,\n        marginVertical: 10,\n    },\n    horizontalContainer: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'space-between',\n        backgroundColor: 'white', // Set background color\n        // padding: 10, // Add padding to the container\n        borderRadius: 10, // Add border radius for rounded corners\n        marginHorizontal: 10,\n        borderWidth: 1,\n    },\n    textInput: {\n        flex: 1,\n        paddingVertical: 10,\n        marginLeft: 10, // Add margin to separate text input from icons\n    },\n    iconButton: {\n        padding: 10,\n    },\n    selectedImage: {\n        width: 200,\n        height: 200,\n        resizeMode: 'cover',\n        marginBottom: 10,\n    },\n    buttonText: {\n        color: 'black',\n        fontWeight: 'bold',\n    },\n    buttonDisabled: {\n        opacity: 0.5,\n        backgroundColor: 'gray',\n    },\n    selectedImage: {\n        width: 150,\n        height: 150,\n    },\n    removeImageButton: {\n        backgroundColor: '#ccc',\n        padding: 5,\n        borderRadius: 5,\n        marginTop: 5,\n        alignItems: 'center',\n    },\n    warningLabel: {\n        fontSize: 12,\n        marginHorizontal: 5,\n        marginBottom: 5,\n        textAlign: 'left',\n        alignSelf: 'flex-start',\n        color: \"red\",\n    },\n\n})\n\nexport default ForumComment;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}